{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/config/domIdentifiers.ts","webpack:///./src/lib/module/Module.ts","webpack:///./src/lib/util/ClassUtil.ts","webpack:///./src/lib/util/PageUtil.ts","webpack:///./src/lib/config/localStorageIdentifiers.ts","webpack:///./src/extension.ts","webpack:///./src/lib/module/modules/MsuHrefModule.ts","webpack:///./src/lib/module/modules/step/QuizModule.ts","webpack:///./src/lib/api/quiz/QuizListener.ts","webpack:///./src/lib/util/Debounce.ts","webpack:///./src/lib/module/modules/step/StepModule.ts","webpack:///./src/lib/util/DomUtil.ts","webpack:///./src/lib/module/modules/step/keyboard/StepKeyboardShortcutsModule.ts","webpack:///./src/lib/api/step/StepNavController.ts","webpack:///./src/lib/module/modules/step/VideoModule.ts","webpack:///./src/lib/event/TapEventListener.ts","webpack:///./src/lib/util/StorageUtil.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","videoClass","quizClass","videoId","videoContainerId","stepDataId","siteDataId","msuLinkHeaderClass","videoPlayButtonClass","stepProgressClass","navDivClass","loadModules","start","autoBind","context","contextPrototype","getPrototypeOf","props","length","getOwnPropertyNames","prop","descriptor","getOwnPropertyDescriptor","ComponentUtil","protectedJavaScriptProperties","includes","bindMethod","proto","method","functionToBind","configurable","this","boundFunction","writable","isClassElementPresent","className","elements","document","getElementsByClassName","getElementById","PageUtil","getNavigationBar","querySelector","getSiteData","siteDataElement","JSON","parse","innerText","prefix","videoPlaybackSpeed","data","linkElement","setAttribute","root","tryToGoToNextQuestion","debounceMethod","quizContainer","getNextQuestionButton","startQuizWithResult","startQuizTag","click","nextQuestionButton","QuizModule","toLowerCase","addNextButtonHooks","addEventListener","e","quizContinueKeys","onNewQuizQuestion","inputs","getElementsByTagName","hasFocused","input","hidden","type","style","display","focus","isPageQuiz","onQuestion","listen","params","currentQuestion","getQuestionDataFromMatch","match","current","parseInt","total","onContainerMutate","mutations","observer","h2","QuizListener","questionRegex","test","disconnect","onStart","listenForQuizQuestionChange","onQuizHeaderMutation","MutationObserver","observe","subtree","characterData","childList","listenForQuizStart","attributes","minTimeBetweenInMs","callback","lastRunTime","now","Date","delta","args","sectionNameToIndex","StepModule","getStepData","metadata","processData","element","dataText","step","isStepEnabled","sections","section","tag","index","getProgressString","totalSections","onSectionHoverMutate","mutation","target","HTMLElement","sectionHoverDiv","pageName","trim","endsWith","replace","addNavBarProgressIndicator","navigationBar","progressElement","createElement","appendChild","addHoverProgressIndicator","hoverDiv","addProgressIndicators","addDuplicateNav","nav","content","clonedNav","cloneNode","completeStepButton","clonedCompleteStepButton","preventDefault","originalCanvas","clonedCanvas","cloneCanvas","title","insertAdjacentElement","console","error","isPageStep","original","destination","getContext","width","height","drawImage","stepNavController","shortcuts","Map","activeElement","isContentEditable","StepKeyboardShortcutsModule","illegalActiveTagNamesForShortcuts","tagName","addKeyboardHooks","window","event","canUseKeyboardShortcuts","shiftKey","keys","shortcut","set","goToNext","goToPrevious","goToList","goToNextAndMark","stepNavDiv","listLink","previousLink","nextLink","nextAndMarkLink","onMutation","Element","id","addVideoHooks","toggleVideoState","_video","paused","play","pause","onTap","catch","updatePlaybackRate","newPlaybackRate","_playbackDisplay","playbackRate","setItem","addKeyHandlers","video","currentTime","Math","max","VideoModule","_secondsToScrub","min","duration","_playbackRateIncrementInSeconds","addTapHandler","videoContainer","setupPlaybackDisplay","videoContentDiv","centerPlayButton","offsetHeight","offsetWidth","playButton","containerHeight","containerWidth","buttonHeight","buttonWidth","newTop","newLeft","top","left","setInitialSpeedFromStorage","storedPlaybackSpeedString","getItem","storedPlaybackSpeedValue","Number","parseFloat","isNaN","_videoContainer","isPageVideo","_isActive","_initialTouchTime","getMovementDelta","newer","older","x","pageX","y","pageY","onTouchStart","TouchEvent","touches","_initialTouch","onTouchMove","_lastTouch","movement","TapEventListener","sqrt","_dragMaxSqrtDistance","onTouchEnd","_tapMaxTimeMs","addHooks","getLocalStorageKey","suffix","localStorage","StorageUtil"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","export default {\r\n    videoClass: 'cl-video',\r\n    quizClass: 'cl-quiz',\r\n    videoId: 'vjs_video_3_html5_api',\r\n    videoContainerId: 'vjs_video_3',\r\n    stepDataId: 'cl-step',\r\n    siteDataId: 'cl-site',\r\n    msuLinkHeaderClass: 'masthead',\r\n    videoPlayButtonClass: 'vjs-big-play-button',\r\n    stepProgressClass: 'cl-step-progress',\r\n    navDivClass: 'cl-stepnav-div'\r\n}\r\n","export default abstract class Module {\r\n    abstract start(): void;\r\n\r\n    static loadModules(...modules: Module[]): void {\r\n        for (const module of modules) {\r\n            module.start();\r\n        }\r\n    }\r\n}","export default class ComponentUtil {\r\n    /**\r\n     * There is a react-autobind module that some of our other projects use.\r\n     * I had previously installed this module and was looking at the source on github to make\r\n     * typescript definitions for it, and it's pretty bad. So this is a mini refactor of it, since\r\n     * it's really short anyways.\r\n     *\r\n     * Referenced from\r\n     * https://github.com/cassiozen/React-autobind/blob/master/src/autoBind.js\r\n     */\r\n    static autoBind(context: any, ...props: string[]): void {\r\n        const contextPrototype = Object.getPrototypeOf(context);\r\n\r\n        if (props.length === 0) {\r\n            props = Object.getOwnPropertyNames(contextPrototype);\r\n        }\r\n\r\n        for (const prop of props) {\r\n            const descriptor = Object.getOwnPropertyDescriptor(contextPrototype, prop);\r\n\r\n            // Missing this prop, not a big deal (or the prop isn't a function, so we don't bind it)\r\n            if (descriptor == null || typeof descriptor.value !== 'function') {\r\n                continue;\r\n            }\r\n\r\n            if (ComponentUtil.protectedJavaScriptProperties.includes(prop)) {\r\n                continue;\r\n            }\r\n\r\n            ComponentUtil.bindMethod(contextPrototype, prop, descriptor);\r\n        }\r\n    }\r\n\r\n    // All of the props on the prototype of an empty object should be excluded from binding\r\n    private static protectedJavaScriptProperties: string[] = Object.getOwnPropertyNames(Object.getPrototypeOf({}));\r\n\r\n    /**\r\n     * From autobind-decorator (https://github.com/andreypopp/autobind-decorator/tree/master)\r\n     * Return a descriptor removing the value and returning a getter\r\n     * The getter will return a .bind version of the function\r\n     * and memoize the result against a symbol on the instance\r\n     */\r\n    private static bindMethod(proto: any, method: string, descriptor: PropertyDescriptor) {\r\n        const functionToBind = descriptor.value;\r\n\r\n        Object.defineProperty(proto, method, {\r\n            configurable: true,\r\n            get() {\r\n                if (this === proto || this.hasOwnProperty(method)) {\r\n                    return functionToBind;\r\n                }\r\n\r\n                const boundFunction = functionToBind.bind(this);\r\n\r\n                Object.defineProperty(this, method, {\r\n                    value: boundFunction,\r\n                    configurable: true,\r\n                    writable: true\r\n                });\r\n\r\n                return boundFunction;\r\n            }\r\n        });\r\n    }\r\n}","import ISiteData from '../../interfaces/site/ISiteData';\r\nimport domIdentifiers from '../config/domIdentifiers';\r\nexport default abstract class PageUtil {\r\n    static isClassElementPresent(className: string): boolean {\r\n        const elements = document.getElementsByClassName(className);\r\n\r\n        return !!(elements && elements.length && elements[0]);\r\n    }\r\n\r\n    static get isPageStep(): boolean {\r\n        return !!document.getElementById(domIdentifiers.stepDataId);\r\n    }\r\n\r\n    static get isPageQuiz(): boolean {\r\n        return PageUtil.isClassElementPresent(domIdentifiers.quizClass);\r\n    }\r\n\r\n    static get isPageVideo(): boolean {\r\n        return PageUtil.isClassElementPresent(domIdentifiers.videoClass);\r\n    }\r\n\r\n    static getNavigationBar(): HTMLUListElement | null {\r\n        return document.querySelector('nav ul');\r\n    }\r\n\r\n    static getSiteData(): ISiteData | null {\r\n        const siteDataElement = document.getElementById(domIdentifiers.siteDataId);\r\n\r\n        if (!siteDataElement) {\r\n            return null;\r\n        }\r\n\r\n        return JSON.parse(siteDataElement.innerText);\r\n    }\r\n}\r\n","export default {\r\n    prefix: '__cl_helper:',\r\n    videoPlaybackSpeed: 'videoPlaybackSpeed'\r\n}","import Module from './lib/module/Module';\r\nimport MsuHrefModule from './lib/module/modules/MsuHrefModule';\r\nimport QuizModule from './lib/module/modules/step/QuizModule';\r\nimport StepModule from './lib/module/modules/step/StepModule';\r\nimport VideoModule from './lib/module/modules/step/VideoModule';\r\n\r\nModule.loadModules(\r\n    new StepModule(),\r\n    new QuizModule(),\r\n    new VideoModule(),\r\n    new MsuHrefModule()\r\n);","import domIdentifiers from '../../config/domIdentifiers';\r\nimport PageUtil from '../../util/PageUtil';\r\nimport Module from '../Module';\r\n\r\nexport default class MsuHrefModule extends Module {\r\n    start(): void {\r\n        const data = PageUtil.getSiteData();\r\n\r\n        if (!data) {\r\n            return;\r\n        }\r\n\r\n        const linkElement = document.querySelector(`.${domIdentifiers.msuLinkHeaderClass} a`);\r\n\r\n        if (!linkElement) {\r\n            return;\r\n        }\r\n\r\n        linkElement.setAttribute('href', data.root);\r\n    }\r\n}","import QuizListener, { IQuestionData } from '../../../api/quiz/QuizListener';\r\nimport domIdentifiers from '../../../config/domIdentifiers';\r\nimport ClassUtil from '../../../util/ClassUtil';\r\nimport Debounce from '../../../util/Debounce';\r\nimport PageUtil from '../../../util/PageUtil';\r\nimport Module from '../../Module';\r\n\r\nexport default class QuizModule extends Module {\r\n    private static quizContinueKeys: string[] = ['Enter', 'ArrowRight'];\r\n    private readonly quizContainer: HTMLDivElement;\r\n\r\n    static getNextQuestionButton(): HTMLButtonElement | null {\r\n        return document.querySelector(`.${domIdentifiers.quizClass} button`);\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n\r\n        this.tryToGoToNextQuestion = Debounce.debounceMethod(100, this.tryToGoToNextQuestion);\r\n        this.quizContainer = document.getElementsByClassName(domIdentifiers.quizClass)[0] as HTMLDivElement;\r\n    }\r\n\r\n    private startQuizWithResult(): boolean {\r\n        if (!this.quizContainer) {\r\n            return false;\r\n        }\r\n\r\n        const startQuizTag = this.quizContainer.querySelector('a');\r\n\r\n        if (!startQuizTag) {\r\n            return false;\r\n        }\r\n\r\n        if (!startQuizTag.innerText.includes('click to proceed to the quiz.')) {\r\n            return false;\r\n        }\r\n\r\n        startQuizTag.click();\r\n        return true;\r\n    }\r\n\r\n    private tryToGoToNextQuestion() {\r\n        const nextQuestionButton = QuizModule.getNextQuestionButton();\r\n\r\n        if (!nextQuestionButton || !nextQuestionButton.innerText.toLowerCase().includes('next')) {\r\n            return;\r\n        }\r\n\r\n        nextQuestionButton.click();\r\n    }\r\n\r\n    private addNextButtonHooks() {\r\n        document.addEventListener('keydown', (e: KeyboardEvent) => {\r\n            if (!QuizModule.quizContinueKeys.includes(e.key)) {\r\n                return;\r\n            }\r\n\r\n            const couldStartQuiz = this.startQuizWithResult();\r\n\r\n            if (couldStartQuiz) {\r\n                return;\r\n            }\r\n\r\n            this.tryToGoToNextQuestion();\r\n        });\r\n    }\r\n\r\n    private onNewQuizQuestion() {\r\n        const inputs = this.quizContainer.getElementsByTagName('input');\r\n        let hasFocused: boolean = false;\r\n\r\n        for (const input of inputs) {\r\n            input.setAttribute('autocomplete', 'off');\r\n\r\n            if (!hasFocused && !input.hidden && input.type !== 'hidden' && input.style.display !== 'none') {\r\n                input.focus();\r\n                hasFocused = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageQuiz) {\r\n            return;\r\n        }\r\n\r\n        this.addNextButtonHooks();\r\n\r\n        new QuizListener({ onQuestion: this.onNewQuizQuestion }).listen();\r\n    }\r\n}\r\n","import domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\n\r\ninterface IQuizListenerParams {\r\n    onStart?(data: IQuestionData): void;\r\n    onQuestion?(data: IQuestionData): void;\r\n}\r\n\r\nexport interface IQuestionData {\r\n    current: number;\r\n    total: number;\r\n}\r\n\r\nexport default class QuizListener {\r\n    private static questionRegex = /^question (\\d+) of (\\d+)$/i;\r\n    private readonly quizContainer: HTMLElement;\r\n    private currentQuestion: number;\r\n\r\n    constructor(readonly params: IQuizListenerParams) {\r\n        this.quizContainer = document.getElementsByClassName(domIdentifiers.quizClass)[0] as HTMLElement;\r\n        this.currentQuestion = 0;\r\n\r\n        ClassUtil.autoBind(this);\r\n    }\r\n\r\n    private getQuestionDataFromMatch(match: RegExpMatchArray): IQuestionData {\r\n        const current = parseInt(match[1]);\r\n        const total = parseInt(match[2]);\r\n\r\n        return { current, total };\r\n    }\r\n\r\n    private onContainerMutate(mutations: MutationRecord[], observer: MutationObserver) {\r\n        const h2 = this.quizContainer.querySelector('h2');\r\n\r\n        if (!h2) {\r\n            return;\r\n        }\r\n\r\n        if (!QuizListener.questionRegex.test(h2.innerText)) {\r\n            return;\r\n        }\r\n\r\n        observer.disconnect();\r\n\r\n        const match = h2.innerText.match(QuizListener.questionRegex);\r\n\r\n        if (!match) {\r\n            return;\r\n        }\r\n\r\n\r\n        const data = this.getQuestionDataFromMatch(match);\r\n\r\n        this.currentQuestion = data.current;\r\n\r\n        if (this.params.onStart) {\r\n            this.params.onStart(data);\r\n        }\r\n\r\n        if (this.params.onQuestion) {\r\n            this.params.onQuestion(data);\r\n        }\r\n\r\n        this.listenForQuizQuestionChange();\r\n    }\r\n\r\n    private onQuizHeaderMutation() {\r\n        const h2 = this.quizContainer.querySelector('h2');\r\n\r\n        if (!h2) {\r\n            return;\r\n        }\r\n\r\n        if (!QuizListener.questionRegex.test(h2.innerText)) {\r\n            return;\r\n        }\r\n\r\n        const match = h2.innerText.match(QuizListener.questionRegex);\r\n\r\n        if (!match) {\r\n            return;\r\n        }\r\n\r\n        const data = this.getQuestionDataFromMatch(match);\r\n\r\n        if (data.current === this.currentQuestion) {\r\n            return;\r\n        }\r\n\r\n        this.currentQuestion = data.current;\r\n\r\n        if (this.params.onQuestion) {\r\n            this.params.onQuestion(data);\r\n        }\r\n    }\r\n\r\n    private listenForQuizQuestionChange() {\r\n        new MutationObserver(this.onQuizHeaderMutation)\r\n            .observe(this.quizContainer, { subtree: true, characterData: true, childList: true });\r\n    }\r\n\r\n    private listenForQuizStart() {\r\n        new MutationObserver(this.onContainerMutate)\r\n            .observe(this.quizContainer, { subtree: true, childList: true, characterData: true, attributes: true });\r\n    }\r\n\r\n    listen() {\r\n        this.listenForQuizStart();\r\n    }\r\n}","export default class Debounce {\r\n    static debounceMethod(minTimeBetweenInMs: number, callback: Function) {\r\n        let lastRunTime = 0;\r\n\r\n        return (...args: any[]) => {\r\n            const now = Date.now();\r\n            const delta = now - lastRunTime;\r\n\r\n            if (delta < minTimeBetweenInMs) {\r\n                return;\r\n            }\r\n\r\n            callback(...args);\r\n            lastRunTime = now;\r\n        }\r\n    }\r\n}","import IStepData from '../../../../interfaces/step/IStepData';\r\nimport IStepMetadata from '../../../../interfaces/step/IStepMetadata';\r\nimport domIdentifiers from '../../../config/domIdentifiers';\r\nimport ClassUtil from '../../../util/ClassUtil';\r\nimport DomUtil from '../../../util/DomUtil';\r\nimport PageUtil from '../../../util/PageUtil';\r\nimport Module from '../../Module';\r\nimport StepKeyboardShortcutsModule from './keyboard/StepKeyboardShortcutsModule';\r\n\r\n/**\r\n * A module which runs on each individual step page.\r\n */\r\nexport default class StepModule extends Module {\r\n    readonly data: IStepData | null;\r\n    readonly metadata: IStepMetadata | null;\r\n    private sectionHoverDiv?: HTMLElement;\r\n    private sectionNameToIndex: { [key: string]: number } = {};\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n\r\n        this.data = StepModule.getStepData();\r\n        this.metadata = this.processData(this.data);\r\n    }\r\n\r\n    static getStepData(): IStepData | null {\r\n        const element = document.getElementById(domIdentifiers.stepDataId);\r\n\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const dataText = element.innerText;\r\n\r\n        return JSON.parse(dataText);\r\n    }\r\n\r\n    private processData(data: IStepData | null): IStepMetadata | null {\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        if (!data.step) {\r\n            return { isStepEnabled: false };\r\n        }\r\n\r\n        let current;\r\n\r\n        for (let i = 0; i < data.sections.length; ++i) {\r\n            const section = data.sections[i];\r\n\r\n            this.sectionNameToIndex[section.name] = i;\r\n\r\n            if (!current && section.tag === data.current) {\r\n                current = {\r\n                    section,\r\n                    index: i\r\n                };\r\n            }\r\n        }\r\n\r\n        if (!current) {\r\n            return { isStepEnabled: true };\r\n        }\r\n\r\n        return {\r\n            isStepEnabled: true,\r\n            current\r\n        };\r\n    }\r\n\r\n    private getProgressString(current: number) {\r\n        return `(${ current }/${ this.totalSections })`;\r\n    }\r\n\r\n    private get totalSections(): number {\r\n        return (this.data && this.data.sections && this.data.sections.length) || 0;\r\n    }\r\n\r\n    private onSectionHoverMutate(mutations: MutationRecord[]) {\r\n        for (const mutation of mutations) {\r\n            let target: HTMLElement;\r\n\r\n            if (mutation.target instanceof HTMLElement) {\r\n                target = mutation.target;\r\n            } else {\r\n                if (mutation.type === 'characterData' && this.sectionHoverDiv) {\r\n                    target = this.sectionHoverDiv;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let pageName = target.innerText.trim();\r\n\r\n            if (!this.sectionNameToIndex.hasOwnProperty(pageName)) {\r\n                if (pageName.endsWith('(cont)')) {\r\n                    pageName = pageName.replace(/\\s+\\(cont\\)\\s*/, '').trim();\r\n                }\r\n\r\n                // Check again in case the cont removal fixed it\r\n                if (!this.sectionNameToIndex.hasOwnProperty(pageName)) {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            target.innerText += ` ${ this.getProgressString(this.sectionNameToIndex[pageName] + 1) }`;\r\n            break;\r\n        }\r\n    }\r\n\r\n    private addNavBarProgressIndicator() {\r\n        const navigationBar = PageUtil.getNavigationBar();\r\n\r\n        if (!navigationBar || !this.metadata || !this.metadata.current) {\r\n            return;\r\n        }\r\n\r\n        const progressElement = document.createElement('li');\r\n        progressElement.innerText = `Progress: ${ this.getProgressString(this.metadata.current.index + 1) }`;\r\n\r\n        navigationBar.appendChild(progressElement);\r\n    }\r\n\r\n    private addHoverProgressIndicator() {\r\n        const hoverDiv = document.querySelector(`.${ domIdentifiers.stepProgressClass } div`);\r\n\r\n        if (!hoverDiv) {\r\n            return;\r\n        }\r\n\r\n        this.sectionHoverDiv = hoverDiv as HTMLElement;\r\n\r\n        new MutationObserver(this.onSectionHoverMutate)\r\n            .observe(hoverDiv, { characterData: true, attributes: true, subtree: true });\r\n    }\r\n\r\n    private addProgressIndicators() {\r\n        this.addNavBarProgressIndicator();\r\n        this.addHoverProgressIndicator();\r\n    }\r\n\r\n    private addDuplicateNav() {\r\n        const nav = document.getElementsByClassName(domIdentifiers.navDivClass)[0];\r\n\r\n        if (!nav) {\r\n            console.error('Could not find navigation bar to duplicate');\r\n            return;\r\n        }\r\n\r\n        const content = document.getElementsByClassName('content')[0];\r\n\r\n        if (!content) {\r\n            console.error('Could not find content to duplicate navigation bar to');\r\n            return;\r\n        }\r\n\r\n        const clonedNav = nav.cloneNode(true) as HTMLDivElement;\r\n\r\n        const completeStepButton = nav.getElementsByClassName('cl-step-completed-next')[0] as HTMLLinkElement;\r\n        const clonedCompleteStepButton = clonedNav.getElementsByClassName('cl-step-completed-next')[0] as HTMLLinkElement;\r\n\r\n        if (completeStepButton || clonedCompleteStepButton) {\r\n            clonedCompleteStepButton.addEventListener('click', function (e) {\r\n                e.preventDefault();\r\n                completeStepButton.click();\r\n            });\r\n        }\r\n\r\n        const originalCanvas = nav.querySelector('canvas');\r\n        const clonedCanvas = clonedNav.querySelector('canvas');\r\n\r\n        if (originalCanvas && clonedCanvas) {\r\n            DomUtil.cloneCanvas(originalCanvas, clonedCanvas);\r\n            clonedCanvas.title = 'Hovering on the duplicate nav is not currently supported';\r\n        }\r\n\r\n        content.insertAdjacentElement('afterend', clonedNav);\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageStep) {\r\n            return;\r\n        }\r\n\r\n        this.addProgressIndicators();\r\n        this.addDuplicateNav();\r\n\r\n        new StepKeyboardShortcutsModule().start();\r\n    }\r\n}","export default abstract class DomUtil {\r\n    static cloneCanvas(original: HTMLCanvasElement, destination: HTMLCanvasElement): void {\r\n        const context = destination.getContext('2d');\r\n\r\n        if (!context) {\r\n            return;\r\n        }\r\n\r\n        destination.width = original.width;\r\n        destination.height = original.height;\r\n\r\n        context.drawImage(original, 0, 0);\r\n    }\r\n}","import StepNavController from '../../../../api/step/StepNavController';\r\nimport Module from '../../../Module';\r\n\r\nexport default class StepKeyboardShortcutsModule extends Module {\r\n    private static readonly illegalActiveTagNamesForShortcuts = ['input', 'textarea'];\r\n    private readonly stepNavController: StepNavController = new StepNavController();\r\n    private readonly shortcuts: Map<String[], Function> = new Map();\r\n\r\n    private get canUseKeyboardShortcuts(): boolean {\r\n        const activeElement = document.activeElement;\r\n\r\n        if (!activeElement) {\r\n            return true;\r\n        }\r\n\r\n        if ((<HTMLElement>activeElement).isContentEditable) {\r\n            return false;\r\n        }\r\n\r\n        return !StepKeyboardShortcutsModule.illegalActiveTagNamesForShortcuts.includes(activeElement.tagName.toLowerCase());\r\n    }\r\n\r\n    private addKeyboardHooks() {\r\n        window.addEventListener('keydown', (event) => {\r\n            if (!this.canUseKeyboardShortcuts) {\r\n                return;\r\n            }\r\n\r\n            // We only want to trigger the event if shift is pressed with the key\r\n            if (!event.shiftKey || event.key === 'Shift') {\r\n                return;\r\n            }\r\n\r\n            for (const [keys, shortcut] of this.shortcuts) {\r\n                if (keys.includes(event.key)) {\r\n                    shortcut();\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    start(): void {\r\n        this.shortcuts.set(['N'], this.stepNavController.goToNext);\r\n        this.shortcuts.set(['B'], this.stepNavController.goToPrevious);\r\n        this.shortcuts.set(['L'], this.stepNavController.goToList);\r\n        this.shortcuts.set(['M'], this.stepNavController.goToNextAndMark);\r\n\r\n        this.addKeyboardHooks();\r\n    }\r\n}","import domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\n\r\nexport default class StepNavController {\r\n    private readonly listLink: HTMLAnchorElement;\r\n    private readonly previousLink: HTMLAnchorElement;\r\n    private readonly nextLink: HTMLAnchorElement;\r\n    private readonly nextAndMarkLink: HTMLAnchorElement;\r\n\r\n    constructor(stepNavDiv?: Element) {\r\n        ClassUtil.autoBind(this);\r\n\r\n        if (!stepNavDiv) {\r\n            stepNavDiv = document.getElementsByClassName(domIdentifiers.navDivClass)[0];\r\n        }\r\n\r\n        [\r\n            this.listLink,\r\n            this.previousLink,\r\n            this.nextLink,\r\n            this.nextAndMarkLink\r\n        ] = Array.from(stepNavDiv.getElementsByTagName('a'));\r\n    }\r\n\r\n    goToList() {\r\n        this.listLink.click();\r\n    }\r\n\r\n    goToPrevious() {\r\n        this.previousLink.click();\r\n    }\r\n\r\n    goToNext() {\r\n        this.nextLink.click();\r\n    }\r\n\r\n    goToNextAndMark() {\r\n        this.nextAndMarkLink.click();\r\n    }\r\n}","import domIdentifiers from '../../../config/domIdentifiers';\r\nimport localStorageIdentifiers from '../../../config/localStorageIdentifiers';\r\nimport TapEventListener from '../../../event/TapEventListener';\r\nimport ClassUtil from '../../../util/ClassUtil';\r\nimport PageUtil from '../../../util/PageUtil';\r\nimport StorageUtil from '../../../util/StorageUtil';\r\nimport Module from '../../Module';\r\n\r\nexport default class VideoModule extends Module {\r\n    private static _secondsToScrub: number = 5;\r\n    private static _playbackRateIncrementInSeconds: number = 0.125;\r\n    private _video?: HTMLVideoElement;\r\n    private _videoContainer?: HTMLElement;\r\n    private _playbackDisplay?: HTMLElement;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n    }\r\n\r\n    private onMutation(mutations: MutationRecord[], observer: MutationObserver): void {\r\n       for (const mutation of mutations) {\r\n           if (!(mutation.target instanceof Element)) {\r\n               continue;\r\n           }\r\n\r\n           if (mutation.target.id === domIdentifiers.videoId) {\r\n               this.addVideoHooks(mutation.target as HTMLVideoElement);\r\n               observer.disconnect();\r\n               return;\r\n           }\r\n       }\r\n    }\r\n\r\n    private async toggleVideoState() {\r\n        if (!this._video) {\r\n            return;\r\n        }\r\n\r\n        if (this._video.paused) {\r\n           return this._video.play();\r\n        }\r\n\r\n        return this._video.pause();\r\n    }\r\n\r\n    private onTap() {\r\n       this.toggleVideoState()\r\n           .catch(e => console.error('Unable to toggle video state:', e));\r\n    }\r\n\r\n    private updatePlaybackRate(newPlaybackRate: number) {\r\n        if (!this._video || !this._playbackDisplay) {\r\n            return;\r\n        }\r\n\r\n        this._video.playbackRate = newPlaybackRate;\r\n        this._playbackDisplay.innerText = `Playback Speed: ${newPlaybackRate}`;\r\n        StorageUtil.setItem(localStorageIdentifiers.videoPlaybackSpeed, newPlaybackRate);\r\n    }\r\n\r\n    private addKeyHandlers(video: HTMLVideoElement) {\r\n        window.addEventListener('keydown',  (e: KeyboardEvent) => {\r\n            if (['ArrowLeft'].includes(e.key)) {\r\n                video.currentTime = Math.max(video.currentTime - VideoModule._secondsToScrub, 0);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['ArrowRight'].includes(e.key)) {\r\n                video.currentTime = Math.min(video.duration, video.currentTime + VideoModule._secondsToScrub);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['_', '-'].includes(e.key)) {\r\n                this.updatePlaybackRate(Math.max(video.playbackRate - VideoModule._playbackRateIncrementInSeconds, 0));\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['+', '='].includes(e.key)) {\r\n                this.updatePlaybackRate(video.playbackRate + VideoModule._playbackRateIncrementInSeconds);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['0'].includes(e.key)) {\r\n                this.updatePlaybackRate(1.0);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if ([' ', 'Space', 'Enter'].includes(e.key)) {\r\n                this.onTap();\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n        });\r\n    }\r\n\r\n    private addTapHandler(videoContainer: HTMLElement) {\r\n        const tapListener = new TapEventListener(videoContainer, this.onTap);\r\n        tapListener.listen();\r\n    }\r\n\r\n    private setupPlaybackDisplay(video: HTMLVideoElement) {\r\n        const videoContentDiv = document.getElementsByClassName(domIdentifiers.videoClass)[0];\r\n\r\n        if (videoContentDiv) {\r\n            this._playbackDisplay = document.createElement('div');\r\n            this.updatePlaybackRate(video.playbackRate);\r\n            videoContentDiv.insertAdjacentElement('afterend', this._playbackDisplay);\r\n        }\r\n    }\r\n\r\n    private centerPlayButton(videoContainer: HTMLElement) {\r\n        const { offsetHeight: containerHeight, offsetWidth: containerWidth } = videoContainer;\r\n\r\n        const playButton = document.getElementsByClassName(domIdentifiers.videoPlayButtonClass)[0];\r\n\r\n        if (!playButton) {\r\n            return;\r\n        }\r\n\r\n        if (!(playButton instanceof HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        const { offsetHeight: buttonHeight, offsetWidth: buttonWidth } = playButton;\r\n\r\n        if (!containerHeight || !containerWidth || !buttonHeight || !buttonWidth) {\r\n            return;\r\n        }\r\n\r\n        const newTop = (containerHeight - buttonHeight) / 2;\r\n        const newLeft = (containerWidth - buttonWidth) / 2;\r\n\r\n        playButton.style.top = `${newTop}px`;\r\n        playButton.style.left = `${newLeft}px`;\r\n    }\r\n\r\n    private setInitialSpeedFromStorage(video: HTMLVideoElement) {\r\n        const storedPlaybackSpeedString = StorageUtil.getItem(localStorageIdentifiers.videoPlaybackSpeed);\r\n\r\n        if (!storedPlaybackSpeedString) {\r\n            return;\r\n        }\r\n\r\n        const storedPlaybackSpeedValue = Number.parseFloat(storedPlaybackSpeedString);\r\n\r\n        if (Number.isNaN(storedPlaybackSpeedValue)) {\r\n            return;\r\n        }\r\n\r\n        video.playbackRate = storedPlaybackSpeedValue;\r\n    }\r\n\r\n    private addVideoHooks(video: HTMLVideoElement) {\r\n        const videoContainer = document.getElementById(domIdentifiers.videoContainerId);\r\n\r\n        if (!videoContainer) {\r\n            return;\r\n        }\r\n\r\n        this._videoContainer = videoContainer;\r\n        this._video = video;\r\n\r\n        this.setInitialSpeedFromStorage(video);\r\n        this.setupPlaybackDisplay(video);\r\n        this.addTapHandler(videoContainer);\r\n        this.addKeyHandlers(video);\r\n        this.centerPlayButton(videoContainer);\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageVideo) {\r\n            return;\r\n        }\r\n\r\n        const video = document.getElementById(domIdentifiers.videoId);\r\n\r\n        if (video) {\r\n            this.addVideoHooks(video as HTMLVideoElement);\r\n            return;\r\n        }\r\n\r\n        const videoContainer = document.getElementsByClassName(domIdentifiers.videoClass)[0];\r\n\r\n        const observer = new MutationObserver(this.onMutation);\r\n\r\n        observer.observe(videoContainer, { childList: true, subtree: true });\r\n    }\r\n}","import ClassUtil from '../util/ClassUtil';\r\n\r\ninterface ITouchMovement {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport default class TapEventListener {\r\n    private static _tapMaxTimeMs: number = 200;\r\n    private static _dragMaxSqrtDistance: number = 20;\r\n    private _initialTouchTime: number;\r\n    private _initialTouch?: Touch;\r\n    private _lastTouch?: Touch;\r\n    private _isActive: boolean;\r\n\r\n    constructor(readonly element: Element, readonly onTap: () => void) {\r\n        ClassUtil.autoBind(this);\r\n\r\n        this._isActive = false;\r\n        this._initialTouchTime = 0;\r\n    }\r\n\r\n    private static getMovementDelta(newer: Touch, older: Touch): ITouchMovement {\r\n        return {\r\n            x: newer.pageX - older.pageX,\r\n            y: newer.pageY - older.pageY\r\n        };\r\n    }\r\n\r\n    private onTouchStart(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        if (event.touches.length !== 1) {\r\n            return;\r\n        }\r\n\r\n        this._initialTouch = event.touches[0];\r\n        this._initialTouchTime = Date.now();\r\n        this._isActive = true;\r\n    }\r\n\r\n    private onTouchMove(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        this._lastTouch = event.touches[0];\r\n\r\n        if (!this._initialTouch) {\r\n            return;\r\n        }\r\n\r\n        const movement = TapEventListener.getMovementDelta(this._lastTouch, this._initialTouch);\r\n\r\n        if (Math.sqrt(movement.x ** 2 + movement.y ** 2) >= TapEventListener._dragMaxSqrtDistance) {\r\n            this._isActive = false;\r\n        }\r\n    }\r\n\r\n    private onTouchEnd(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        if (!this._isActive) {\r\n            return;\r\n        }\r\n\r\n        if (Date.now() - this._initialTouchTime >= TapEventListener._tapMaxTimeMs) {\r\n            return;\r\n        }\r\n\r\n        this.onTap();\r\n    }\r\n\r\n    private addHooks() {\r\n        this.element.addEventListener('touchstart', this.onTouchStart);\r\n        this.element.addEventListener('touchmove', this.onTouchMove);\r\n        this.element.addEventListener('touchend', this.onTouchEnd);\r\n    }\r\n\r\n    public listen() {\r\n        this.addHooks();\r\n    }\r\n}","import localStorageIdentifiers from '../config/localStorageIdentifiers';\r\nexport default class StorageUtil {\r\n    private static getLocalStorageKey(suffix: string): string {\r\n        return localStorageIdentifiers.prefix + suffix;\r\n    }\r\n\r\n    static setItem(key: string, value: any) {\r\n        window.localStorage.setItem(StorageUtil.getLocalStorageKey(key), value);\r\n    }\r\n\r\n    static getItem(key: string): string | null {\r\n        return window.localStorage.getItem(StorageUtil.getLocalStorageKey(key));\r\n    }\r\n}"],"sourceRoot":""}