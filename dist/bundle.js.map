{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/module/Module.ts","webpack:///./src/lib/config/domIdentifiers.ts","webpack:///./src/lib/util/PageUtil.ts","webpack:///./src/lib/util/ClassUtil.ts","webpack:///./src/lib/config/localStorageIdentifiers.ts","webpack:///./src/lib/util/StorageUtil.ts","webpack:///./src/extension.ts","webpack:///./src/lib/module/modules/FontAwesomeModule.ts","webpack:///./src/lib/module/modules/MsuHrefModule.ts","webpack:///./src/lib/module/modules/step/QuizModule.ts","webpack:///./src/lib/api/quiz/QuizListener.ts","webpack:///./src/lib/util/Debounce.ts","webpack:///./src/lib/module/modules/step/StepModule.ts","webpack:///./src/lib/config/constants.ts","webpack:///./src/lib/enum/SectionStatus.ts","webpack:///./src/lib/util/DomUtil.ts","webpack:///./src/lib/module/modules/step/keyboard/StepKeyboardShortcutsModule.ts","webpack:///./src/lib/api/step/StepNavController.ts","webpack:///./src/lib/module/modules/step/VideoModule.ts","webpack:///./src/lib/event/TapEventListener.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Module","loadModules","_i","arguments","length","modules_1","__values","modules_1_1","next","done","start","default","quizClass","videoCourseLibClass","videoElementSelector","videoElementClass","videoContainerClass","stepDataId","siteDataId","msuLinkHeaderClass","videoPlayButtonClass","stepProgressClass","navDivClass","navArrowsSelector","navListSelector","owenBodyClass","domIdentifiers_1","PageUtil","isClassElementPresent","className","elements","document","getElementsByClassName","Boolean","getElementById","getNavigationBar","querySelector","getSiteData","siteDataElement","JSON","parse","innerText","activeElement","isContentEditable","illegalActiveTagNamesForShortcuts","includes","tagName","toLowerCase","ComponentUtil","autoBind","context","props","contextPrototype","getPrototypeOf","getOwnPropertyNames","props_1","props_1_1","prop","descriptor","getOwnPropertyDescriptor","protectedJavaScriptProperties","bindMethod","proto","method","functionToBind","configurable","this","boundFunction","writable","prefix","videoPlaybackSpeed","sidebarExpanded","localStorageIdentifiers_1","StorageUtil","getLocalStorageKey","suffix","setItem","window","localStorage","getItem","Module_1","FontAwesomeModule_1","MsuHrefModule_1","QuizModule_1","StepModule_1","VideoModule_1","isPageCourseLib","FontAwesomeModule","_super","__extends","scriptElement","createElement","src","crossOrigin","head","appendChild","PageUtil_1","MsuHrefModule","data","linkElement","setAttribute","root","QuizListener_1","ClassUtil_1","Debounce_1","QuizModule","_this","tryToGoToNextQuestion","debounceMethod","quizContainer","getNextQuestionButton","startQuizWithResult","startQuizTag","click","nextQuestionButton","addNextButtonHooks","addEventListener","e","quizContinueKeys","onNewQuizQuestion","inputs","getElementsByTagName","hasFocused","inputs_1","inputs_1_1","input","hidden","type","style","display","focus","isPageQuiz","onQuestion","listen","QuizListener","params","currentQuestion","getQuestionDataFromMatch","match","current","parseInt","total","onContainerMutate","mutations","observer","h2","questionRegex","test","disconnect","onStart","listenForQuizQuestionChange","onQuizHeaderMutation","MutationObserver","observe","subtree","characterData","childList","listenForQuizStart","attributes","Debounce","minTimeBetweenInMs","callback","lastRunTime","args","now","Date","apply","__spread","constants_1","SectionStatus_1","DomUtil_1","StorageUtil_1","StepKeyboardShortcutsModule_1","StepModule","sectionNameToIndex","getStepData","metadata","processData","element","dataText","step","isStepEnabled","sections","section","tag","index","getProgressString","totalSections","onSectionHoverMutate","mutations_1","mutations_1_1","mutation","target","HTMLElement","sectionHoverDiv","pageName","trim","endsWith","replace","addNavBarProgressIndicator","navigationBar","progressElement","addHoverProgressIndicator","hoverDiv","addProgressIndicators","addDuplicateNav","nav","content","clonedNav","cloneNode","completeStepButton","clonedCompleteStepButton","preventDefault","originalCanvas","clonedCanvas","cloneCanvas","title","insertAdjacentElement","console","error","addSidebar","owenBody","stepBodyMin","__read","stepBodyLimitsInPx","remainingWidthPerSide","Number","getComputedStyle","paddingLeft","toString","sidebarWidthInPx","Math","max","sidebarMinWidthInPx","sidebar","sidebarHeader","sidebarTitle","sectionTable","classPrefix","width","completeCount","_c","_d","sectionRow","sectionStatusContainer","sectionStatusIcon","sectionStatusIconClass","sectionTypeToIconName","Unknown","sectionStatusTypeClass","status","sectionStatusCurrentClass","viewed","look","toLocaleString","access","sectionLinkContainer","sectionLink","href","url","isExpanded","sidebarExpandButtonIcon","updateSidebarExpansion","height","innerHeight","paddingTopInPx","paddingTop","offsetHeight","overflow","visibility","body","scrollBarWidth","offsetWidth","clientWidth","storedSidebarExpansion","isPageStep","V","S","Q","T","SectionStatus","DomUtil","original","destination","getContext","drawImage","StepNavController_1","StepKeyboardShortcutsModule","stepNavController","shortcuts","Map","addKeyboardHooks","event","canUseKeyboardShortcuts","shiftKey","_b","keys","shortcut","set","goToNext","goToPrevious","goToList","goToNextAndMark","StepNavController","stepNavDiv","listLink","imgToLink","_a","Array","from","querySelectorAll","previousImg","nextImg","nextAndMarkImg","previousLink","nextLink","nextAndMarkLink","img","parentElement","TapEventListener_1","VideoModule","_playbackRate","getPlaybackSpeedFromStorage","storedPlaybackSpeedString","storedPlaybackSpeedValue","parseFloat","isNaN","onMutation","Element","classList","contains","addVideoHooks","toggleVideoState","_video","paused","play","pause","onTap","catch","updatePlaybackRate","newPlaybackRate","min","playbackRate","_playbackDisplay","addKeyHandlers","video","_windowKeyHandlers","removeEventListener","currentTime","_secondsToScrub","duration","_playbackRateIncrementInSeconds","addTapHandler","videoContainer","addVideoPlayHandler","setupPlaybackDisplay","videoContentDiv","centerPlayButton","containerHeight","containerWidth","playButton","buttonHeight","buttonWidth","newTop","newLeft","top","left","_videoContainer","isPageVideo","TapEventListener","_isActive","_initialTouchTime","getMovementDelta","newer","older","x","pageX","y","pageY","onTouchStart","TouchEvent","touches","_initialTouch","onTouchMove","_lastTouch","movement","sqrt","pow","_dragMaxSqrtDistance","onTouchEnd","_tapMaxTimeMs","addHooks"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","export default abstract class Module {\r\n    abstract start(): void;\r\n\r\n    static loadModules(...modules: Module[]): void {\r\n        for (const module of modules) {\r\n            module.start();\r\n        }\r\n    }\r\n}","export default {\r\n    quizClass: 'cl-quiz',\r\n    videoCourseLibClass: 'cl-video',\r\n    videoElementSelector: 'video.vjs-tech',\r\n    videoElementClass: 'vjs-tech',\r\n    videoContainerClass: 'video-js',\r\n    stepDataId: 'cl-step',\r\n    siteDataId: 'cl-site',\r\n    msuLinkHeaderClass: 'masthead',\r\n    videoPlayButtonClass: 'vjs-big-play-button',\r\n    stepProgressClass: 'cl-step-progress',\r\n    navDivClass: 'cl-stepnav-div',\r\n    navArrowsSelector: 'img[alt=\"Mark Complete\"]',\r\n    navListSelector: 'img[alt=\"Return to Step\"]',\r\n    owenBodyClass: 'body'\r\n}\r\n","import ISiteData from '../../interfaces/site/ISiteData';\r\nimport domIdentifiers from '../config/domIdentifiers';\r\nexport default abstract class PageUtil {\r\n    private static readonly illegalActiveTagNamesForShortcuts = ['input', 'textarea'];\r\n\r\n    static isClassElementPresent(className: string): boolean {\r\n        const elements = document.getElementsByClassName(className);\r\n\r\n        return !!(elements && elements.length && elements[0]);\r\n    }\r\n\r\n    static get isPageCourseLib(): boolean {\r\n        return Boolean(document.getElementById(domIdentifiers.siteDataId))\r\n    }\r\n\r\n    static get isPageStep(): boolean {\r\n        return !!document.getElementById(domIdentifiers.stepDataId);\r\n    }\r\n\r\n    static get isPageQuiz(): boolean {\r\n        return PageUtil.isClassElementPresent(domIdentifiers.quizClass);\r\n    }\r\n\r\n    static get isPageVideo(): boolean {\r\n        return PageUtil.isClassElementPresent(domIdentifiers.videoCourseLibClass);\r\n    }\r\n\r\n    static getNavigationBar(): HTMLUListElement | null {\r\n        return document.querySelector('nav ul');\r\n    }\r\n\r\n    static getSiteData(): ISiteData | null {\r\n        const siteDataElement = document.getElementById(domIdentifiers.siteDataId);\r\n\r\n        if (!siteDataElement) {\r\n            return null;\r\n        }\r\n\r\n        return JSON.parse(siteDataElement.innerText);\r\n    }\r\n\r\n    static get canUseKeyboardShortcuts(): boolean {\r\n        const activeElement = document.activeElement;\r\n\r\n        if (!activeElement) {\r\n            return true;\r\n        }\r\n\r\n        if ((<HTMLElement>activeElement).isContentEditable) {\r\n            return false;\r\n        }\r\n\r\n        return !PageUtil.illegalActiveTagNamesForShortcuts.includes(activeElement.tagName.toLowerCase());\r\n    }\r\n}\r\n","export default class ComponentUtil {\r\n    /**\r\n     * There is a react-autobind module that some of our other projects use.\r\n     * I had previously installed this module and was looking at the source on github to make\r\n     * typescript definitions for it, and it's pretty bad. So this is a mini refactor of it, since\r\n     * it's really short anyways.\r\n     *\r\n     * Referenced from\r\n     * https://github.com/cassiozen/React-autobind/blob/master/src/autoBind.js\r\n     */\r\n    static autoBind(context: any, ...props: string[]): void {\r\n        const contextPrototype = Object.getPrototypeOf(context);\r\n\r\n        if (props.length === 0) {\r\n            props = Object.getOwnPropertyNames(contextPrototype);\r\n        }\r\n\r\n        for (const prop of props) {\r\n            const descriptor = Object.getOwnPropertyDescriptor(contextPrototype, prop);\r\n\r\n            // Missing this prop, not a big deal (or the prop isn't a function, so we don't bind it)\r\n            if (descriptor == null || typeof descriptor.value !== 'function') {\r\n                continue;\r\n            }\r\n\r\n            if (ComponentUtil.protectedJavaScriptProperties.includes(prop)) {\r\n                continue;\r\n            }\r\n\r\n            ComponentUtil.bindMethod(contextPrototype, prop, descriptor);\r\n        }\r\n    }\r\n\r\n    // All of the props on the prototype of an empty object should be excluded from binding\r\n    private static protectedJavaScriptProperties: string[] = Object.getOwnPropertyNames(Object.getPrototypeOf({}));\r\n\r\n    /**\r\n     * From autobind-decorator (https://github.com/andreypopp/autobind-decorator/tree/master)\r\n     * Return a descriptor removing the value and returning a getter\r\n     * The getter will return a .bind version of the function\r\n     * and memoize the result against a symbol on the instance\r\n     */\r\n    private static bindMethod(proto: any, method: string, descriptor: PropertyDescriptor) {\r\n        const functionToBind = descriptor.value;\r\n\r\n        Object.defineProperty(proto, method, {\r\n            configurable: true,\r\n            get() {\r\n                if (this === proto || this.hasOwnProperty(method)) {\r\n                    return functionToBind;\r\n                }\r\n\r\n                const boundFunction = functionToBind.bind(this);\r\n\r\n                Object.defineProperty(this, method, {\r\n                    value: boundFunction,\r\n                    configurable: true,\r\n                    writable: true\r\n                });\r\n\r\n                return boundFunction;\r\n            }\r\n        });\r\n    }\r\n}","export default {\r\n    prefix: '__cl_helper:',\r\n    videoPlaybackSpeed: 'videoPlaybackSpeed',\r\n    sidebarExpanded: 'sidebarExpanded'\r\n}","import localStorageIdentifiers from '../config/localStorageIdentifiers';\r\nexport default class StorageUtil {\r\n    private static getLocalStorageKey(suffix: string): string {\r\n        return localStorageIdentifiers.prefix + suffix;\r\n    }\r\n\r\n    static setItem(key: string, value: any) {\r\n        window.localStorage.setItem(StorageUtil.getLocalStorageKey(key), value);\r\n    }\r\n\r\n    static getItem(key: string): string | null {\r\n        return window.localStorage.getItem(StorageUtil.getLocalStorageKey(key));\r\n    }\r\n}","import Module from './lib/module/Module';\r\nimport FontAwesomeModule from './lib/module/modules/FontAwesomeModule';\r\nimport MsuHrefModule from './lib/module/modules/MsuHrefModule';\r\nimport QuizModule from './lib/module/modules/step/QuizModule';\r\nimport StepModule from './lib/module/modules/step/StepModule';\r\nimport VideoModule from './lib/module/modules/step/VideoModule';\r\nimport PageUtil from './lib/util/PageUtil';\r\n\r\nif (PageUtil.isPageCourseLib) {\r\n   Module.loadModules(\r\n       new FontAwesomeModule(),\r\n       new StepModule(),\r\n       new QuizModule(),\r\n       new VideoModule(),\r\n       new MsuHrefModule()\r\n   );\r\n}\r\n","import Module from '../Module';\r\n\r\nexport default class FontAwesomeModule extends Module {\r\n    start(): void {\r\n        const scriptElement = document.createElement('script');\r\n        scriptElement.src = 'https://kit.fontawesome.com/f92be839c2.js';\r\n        scriptElement.crossOrigin = 'anonymous';\r\n        document.head.appendChild(scriptElement);\r\n    }\r\n}","import domIdentifiers from '../../config/domIdentifiers';\r\nimport PageUtil from '../../util/PageUtil';\r\nimport Module from '../Module';\r\n\r\nexport default class MsuHrefModule extends Module {\r\n    start(): void {\r\n        const data = PageUtil.getSiteData();\r\n\r\n        if (!data) {\r\n            return;\r\n        }\r\n\r\n        const linkElement = document.querySelector(`.${domIdentifiers.msuLinkHeaderClass} a`);\r\n\r\n        if (!linkElement) {\r\n            return;\r\n        }\r\n\r\n        linkElement.setAttribute('href', data.root);\r\n    }\r\n}","import QuizListener, { IQuestionData } from '../../../api/quiz/QuizListener';\r\nimport domIdentifiers from '../../../config/domIdentifiers';\r\nimport ClassUtil from '../../../util/ClassUtil';\r\nimport Debounce from '../../../util/Debounce';\r\nimport PageUtil from '../../../util/PageUtil';\r\nimport Module from '../../Module';\r\n\r\nexport default class QuizModule extends Module {\r\n    private static quizContinueKeys: string[] = ['Enter', 'ArrowRight'];\r\n    private readonly quizContainer: HTMLDivElement;\r\n\r\n    static getNextQuestionButton(): HTMLButtonElement | null {\r\n        return document.querySelector(`.${domIdentifiers.quizClass} button`);\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n\r\n        this.tryToGoToNextQuestion = Debounce.debounceMethod(100, this.tryToGoToNextQuestion);\r\n        this.quizContainer = document.getElementsByClassName(domIdentifiers.quizClass)[0] as HTMLDivElement;\r\n    }\r\n\r\n    private startQuizWithResult(): boolean {\r\n        if (!this.quizContainer) {\r\n            return false;\r\n        }\r\n\r\n        const startQuizTag = this.quizContainer.querySelector('a');\r\n\r\n        if (!startQuizTag) {\r\n            return false;\r\n        }\r\n\r\n        if (!startQuizTag.innerText.includes('click to proceed to the quiz.')) {\r\n            return false;\r\n        }\r\n\r\n        startQuizTag.click();\r\n        return true;\r\n    }\r\n\r\n    private tryToGoToNextQuestion() {\r\n        const nextQuestionButton = QuizModule.getNextQuestionButton();\r\n\r\n        if (!nextQuestionButton || !nextQuestionButton.innerText.toLowerCase().includes('next')) {\r\n            return;\r\n        }\r\n\r\n        nextQuestionButton.click();\r\n    }\r\n\r\n    private addNextButtonHooks() {\r\n        document.addEventListener('keydown', (e: KeyboardEvent) => {\r\n            if (!QuizModule.quizContinueKeys.includes(e.key)) {\r\n                return;\r\n            }\r\n\r\n            const couldStartQuiz = this.startQuizWithResult();\r\n\r\n            if (couldStartQuiz) {\r\n                return;\r\n            }\r\n\r\n            this.tryToGoToNextQuestion();\r\n        });\r\n    }\r\n\r\n    private onNewQuizQuestion() {\r\n        const inputs = this.quizContainer.getElementsByTagName('input');\r\n        let hasFocused: boolean = false;\r\n\r\n        for (const input of inputs) {\r\n            input.setAttribute('autocomplete', 'off');\r\n\r\n            if (!hasFocused && !input.hidden && input.type !== 'hidden' && input.style.display !== 'none') {\r\n                input.focus();\r\n                hasFocused = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageQuiz) {\r\n            return;\r\n        }\r\n\r\n        this.addNextButtonHooks();\r\n\r\n        new QuizListener({ onQuestion: this.onNewQuizQuestion }).listen();\r\n    }\r\n}\r\n","import domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\n\r\ninterface IQuizListenerParams {\r\n    onStart?(data: IQuestionData): void;\r\n    onQuestion?(data: IQuestionData): void;\r\n}\r\n\r\nexport interface IQuestionData {\r\n    current: number;\r\n    total: number;\r\n}\r\n\r\nexport default class QuizListener {\r\n    private static questionRegex = /^question (\\d+) of (\\d+)$/i;\r\n    private readonly quizContainer: HTMLElement;\r\n    private currentQuestion: number;\r\n\r\n    constructor(readonly params: IQuizListenerParams) {\r\n        this.quizContainer = document.getElementsByClassName(domIdentifiers.quizClass)[0] as HTMLElement;\r\n        this.currentQuestion = 0;\r\n\r\n        ClassUtil.autoBind(this);\r\n    }\r\n\r\n    private getQuestionDataFromMatch(match: RegExpMatchArray): IQuestionData {\r\n        const current = parseInt(match[1]);\r\n        const total = parseInt(match[2]);\r\n\r\n        return { current, total };\r\n    }\r\n\r\n    private onContainerMutate(mutations: MutationRecord[], observer: MutationObserver) {\r\n        const h2 = this.quizContainer.querySelector('h2');\r\n\r\n        if (!h2) {\r\n            return;\r\n        }\r\n\r\n        if (!QuizListener.questionRegex.test(h2.innerText)) {\r\n            return;\r\n        }\r\n\r\n        observer.disconnect();\r\n\r\n        const match = h2.innerText.match(QuizListener.questionRegex);\r\n\r\n        if (!match) {\r\n            return;\r\n        }\r\n\r\n\r\n        const data = this.getQuestionDataFromMatch(match);\r\n\r\n        this.currentQuestion = data.current;\r\n\r\n        if (this.params.onStart) {\r\n            this.params.onStart(data);\r\n        }\r\n\r\n        if (this.params.onQuestion) {\r\n            this.params.onQuestion(data);\r\n        }\r\n\r\n        this.listenForQuizQuestionChange();\r\n    }\r\n\r\n    private onQuizHeaderMutation() {\r\n        const h2 = this.quizContainer.querySelector('h2');\r\n\r\n        if (!h2) {\r\n            return;\r\n        }\r\n\r\n        if (!QuizListener.questionRegex.test(h2.innerText)) {\r\n            return;\r\n        }\r\n\r\n        const match = h2.innerText.match(QuizListener.questionRegex);\r\n\r\n        if (!match) {\r\n            return;\r\n        }\r\n\r\n        const data = this.getQuestionDataFromMatch(match);\r\n\r\n        if (data.current === this.currentQuestion) {\r\n            return;\r\n        }\r\n\r\n        this.currentQuestion = data.current;\r\n\r\n        if (this.params.onQuestion) {\r\n            this.params.onQuestion(data);\r\n        }\r\n    }\r\n\r\n    private listenForQuizQuestionChange() {\r\n        new MutationObserver(this.onQuizHeaderMutation)\r\n            .observe(this.quizContainer, { subtree: true, characterData: true, childList: true });\r\n    }\r\n\r\n    private listenForQuizStart() {\r\n        new MutationObserver(this.onContainerMutate)\r\n            .observe(this.quizContainer, { subtree: true, childList: true, characterData: true, attributes: true });\r\n    }\r\n\r\n    listen() {\r\n        this.listenForQuizStart();\r\n    }\r\n}","export default class Debounce {\r\n    static debounceMethod(minTimeBetweenInMs: number, callback: Function) {\r\n        let lastRunTime = 0;\r\n\r\n        return (...args: any[]) => {\r\n            const now = Date.now();\r\n            const delta = now - lastRunTime;\r\n\r\n            if (delta < minTimeBetweenInMs) {\r\n                return;\r\n            }\r\n\r\n            callback(...args);\r\n            lastRunTime = now;\r\n        }\r\n    }\r\n}","import Optional from '../../../../interfaces/Optional';\r\nimport IStepData from '../../../../interfaces/step/IStepData';\r\nimport IStepMetadata from '../../../../interfaces/step/IStepMetadata';\r\nimport constants from '../../../config/constants';\r\nimport domIdentifiers from '../../../config/domIdentifiers';\r\nimport localStorageIdentifiers from '../../../config/localStorageIdentifiers';\r\nimport SectionStatus from '../../../enum/SectionStatus';\r\nimport ClassUtil from '../../../util/ClassUtil';\r\nimport DomUtil from '../../../util/DomUtil';\r\nimport PageUtil from '../../../util/PageUtil';\r\nimport StorageUtil from '../../../util/StorageUtil';\r\nimport Module from '../../Module';\r\nimport StepKeyboardShortcutsModule from './keyboard/StepKeyboardShortcutsModule';\r\nimport local = chrome.storage.local;\r\n\r\n/**\r\n * A module which runs on each individual step page.\r\n */\r\nexport default class StepModule extends Module {\r\n    private static readonly stepBodyLimitsInPx = [575, 1000];\r\n    private static readonly sidebarMinWidthInPx = 250;\r\n    private static readonly sectionTypeToIconName = {\r\n        'V': 'fas fa-video',\r\n        'S': 'fas fa-pencil-alt',\r\n        'Q': 'fas fa-vial',\r\n        'T': 'fas fa-hammer',\r\n        Unknown: 'fas fa-question'\r\n    };\r\n\r\n    // Holds all the data for the current step\r\n    readonly data: Optional<IStepData>;\r\n    // Holds the metadata for the current section\r\n    readonly metadata: Optional<IStepMetadata>;\r\n    private sectionHoverDiv?: HTMLElement;\r\n    private sectionNameToIndex: { [key: string]: number } = {};\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n\r\n        this.data = StepModule.getStepData();\r\n        this.metadata = this.processData(this.data);\r\n    }\r\n\r\n    static getStepData(): IStepData | null {\r\n        const element = document.getElementById(domIdentifiers.stepDataId);\r\n\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const dataText = element.innerText;\r\n\r\n        return JSON.parse(dataText);\r\n    }\r\n\r\n    private processData(data: Optional<IStepData>): Optional<IStepMetadata> {\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        if (!data.step) {\r\n            return { isStepEnabled: false };\r\n        }\r\n\r\n        let current;\r\n\r\n        for (let i = 0; i < data.sections.length; ++i) {\r\n            const section = data.sections[i];\r\n\r\n            this.sectionNameToIndex[section.name] = i;\r\n\r\n            if (!current && section.tag === data.current) {\r\n                current = {\r\n                    section,\r\n                    index: i\r\n                };\r\n            }\r\n        }\r\n\r\n        if (!current) {\r\n            return { isStepEnabled: true };\r\n        }\r\n\r\n        return {\r\n            isStepEnabled: true,\r\n            current\r\n        };\r\n    }\r\n\r\n    private getProgressString(current: number) {\r\n        return `(${current}/${this.totalSections})`;\r\n    }\r\n\r\n    private get totalSections(): number {\r\n        return (this.data && this.data.sections && this.data.sections.length) || 0;\r\n    }\r\n\r\n    private onSectionHoverMutate(mutations: MutationRecord[]) {\r\n        for (const mutation of mutations) {\r\n            let target: HTMLElement;\r\n\r\n            if (mutation.target instanceof HTMLElement) {\r\n                target = mutation.target;\r\n            } else {\r\n                if (mutation.type === 'characterData' && this.sectionHoverDiv) {\r\n                    target = this.sectionHoverDiv;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let pageName = target.innerText.trim();\r\n\r\n            if (!this.sectionNameToIndex.hasOwnProperty(pageName)) {\r\n                if (pageName.endsWith('(cont)')) {\r\n                    pageName = pageName.replace(/\\s+\\(cont\\)\\s*/, '').trim();\r\n                }\r\n\r\n                // Check again in case the cont removal fixed it\r\n                if (!this.sectionNameToIndex.hasOwnProperty(pageName)) {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            target.innerText += ` ${this.getProgressString(this.sectionNameToIndex[pageName] + 1)}`;\r\n            break;\r\n        }\r\n    }\r\n\r\n    private addNavBarProgressIndicator() {\r\n        const navigationBar = PageUtil.getNavigationBar();\r\n\r\n        if (!navigationBar || !this.metadata || !this.metadata.current) {\r\n            return;\r\n        }\r\n\r\n        const progressElement = document.createElement('li');\r\n        progressElement.innerText = `Progress: ${this.getProgressString(this.metadata.current.index + 1)}`;\r\n\r\n        navigationBar.appendChild(progressElement);\r\n    }\r\n\r\n    private addHoverProgressIndicator() {\r\n        const hoverDiv = document.querySelector(`.${domIdentifiers.stepProgressClass} div`);\r\n\r\n        if (!hoverDiv) {\r\n            return;\r\n        }\r\n\r\n        this.sectionHoverDiv = hoverDiv as HTMLElement;\r\n\r\n        new MutationObserver(this.onSectionHoverMutate)\r\n            .observe(hoverDiv, { characterData: true, attributes: true, subtree: true });\r\n    }\r\n\r\n    private addProgressIndicators() {\r\n        this.addNavBarProgressIndicator();\r\n        this.addHoverProgressIndicator();\r\n    }\r\n\r\n    private addDuplicateNav() {\r\n        const nav = document.getElementsByClassName(domIdentifiers.navDivClass)[0];\r\n\r\n        if (!nav) {\r\n            console.error('Could not find navigation bar to duplicate');\r\n            return;\r\n        }\r\n\r\n        const content = document.getElementsByClassName('content')[0];\r\n\r\n        if (!content) {\r\n            console.error('Could not find content to duplicate navigation bar to');\r\n            return;\r\n        }\r\n\r\n        const clonedNav = nav.cloneNode(true) as HTMLDivElement;\r\n\r\n        const completeStepButton = nav.getElementsByClassName('cl-step-completed-next')[0] as HTMLLinkElement;\r\n        const clonedCompleteStepButton = clonedNav.getElementsByClassName('cl-step-completed-next')[0] as HTMLLinkElement;\r\n\r\n        if (completeStepButton || clonedCompleteStepButton) {\r\n            clonedCompleteStepButton.addEventListener('click', function (e) {\r\n                e.preventDefault();\r\n                completeStepButton.click();\r\n            });\r\n        }\r\n\r\n        const originalCanvas = nav.querySelector('canvas');\r\n        const clonedCanvas = clonedNav.querySelector('canvas');\r\n\r\n        if (originalCanvas && clonedCanvas) {\r\n            DomUtil.cloneCanvas(originalCanvas, clonedCanvas);\r\n            clonedCanvas.title = 'Hovering on the duplicate nav is not currently supported';\r\n        }\r\n\r\n        content.insertAdjacentElement('afterend', clonedNav);\r\n    }\r\n\r\n    addSidebar() {\r\n        if (!this.data || !this.metadata || !this.metadata.current) {\r\n            return;\r\n        }\r\n\r\n        const owenBody = document.getElementsByClassName(domIdentifiers.owenBodyClass)[0];\r\n        if (!owenBody) {\r\n            return;\r\n        }\r\n\r\n        const [stepBodyMin] = StepModule.stepBodyLimitsInPx;\r\n        const remainingWidthPerSide = Number.parseInt((getComputedStyle(owenBody).paddingLeft || (stepBodyMin / 2).toString()).replace(/[^\\d]/g, ''));\r\n        const sidebarWidthInPx = Math.max(remainingWidthPerSide, StepModule.sidebarMinWidthInPx);\r\n\r\n        const sidebar = document.createElement('div');\r\n        const sidebarHeader = document.createElement('div');\r\n        const sidebarTitle = document.createElement('div');\r\n        const sectionTable = document.createElement('table');\r\n\r\n        sidebar.className = `${constants.classPrefix}step-sidebar`;\r\n        sidebar.style.width = sidebarWidthInPx + 'px';\r\n\r\n        sidebarHeader.className = `${constants.classPrefix}sidebar-header`;\r\n\r\n        let completeCount = 0;\r\n        for (const section of this.data.sections) {\r\n            const sectionRow = document.createElement('tr');\r\n\r\n            const sectionStatusContainer = document.createElement('td');\r\n            const sectionStatusIcon = document.createElement('i');\r\n            sectionStatusContainer.appendChild(sectionStatusIcon);\r\n\r\n            const sectionStatusIconClass = StepModule.sectionTypeToIconName[section.type] || StepModule.sectionTypeToIconName.Unknown;\r\n            const sectionStatusTypeClass = `${constants.classPrefix}section-status-${section.status}`;\r\n            const sectionStatusCurrentClass = `${constants.classPrefix}section-current-${section.tag === this.metadata.current.section.tag}`;\r\n            sectionStatusIcon.className = `${sectionStatusIconClass} ${sectionStatusTypeClass} ${sectionStatusCurrentClass}`;\r\n\r\n            if (section.status === SectionStatus.done || section.status === SectionStatus.viewed) {\r\n                let title = `First viewed at ${new Date(section.look * 1000).toLocaleString()}`;\r\n                if (section.status === SectionStatus.done) {\r\n                    title += `, marked complete at ${new Date(section.access * 1000).toLocaleString()}`;\r\n                    completeCount++;\r\n                }\r\n                sectionStatusContainer.title = title;\r\n            } else {\r\n                sectionStatusContainer.title = 'Not yet viewed';\r\n            }\r\n\r\n            const sectionLinkContainer = document.createElement('td');\r\n            const sectionLink = document.createElement('a');\r\n            sectionLinkContainer.appendChild(sectionLink);\r\n\r\n            sectionLink.href = section.url;\r\n            sectionLink.innerText = section.name;\r\n\r\n            sectionRow.appendChild(sectionStatusContainer);\r\n            sectionRow.appendChild(sectionLinkContainer);\r\n\r\n            sectionTable.appendChild(sectionRow);\r\n        }\r\n\r\n        sidebarTitle.innerText = this.data.name + ' ' + this.getProgressString(completeCount);\r\n\r\n        let isExpanded = true;\r\n\r\n        const sidebarExpandButtonIcon = document.createElement('i');\r\n\r\n        const updateSidebarExpansion = () => {\r\n            StorageUtil.setItem(localStorageIdentifiers.sidebarExpanded, isExpanded);\r\n\r\n            if (isExpanded) {\r\n                sidebar.style.height = window.innerHeight + 'px';\r\n            } else {\r\n                const paddingTopInPx = Number.parseInt((window.getComputedStyle(sidebar).paddingTop || '0').replace(/[^\\d]/g, ''));\r\n                sidebar.style.height = (sidebarHeader.offsetHeight + paddingTopInPx * 2) + 'px';\r\n            }\r\n\r\n            sidebar.style.overflow = isExpanded ? 'auto' : 'hidden';\r\n            sectionTable.style.visibility = isExpanded ? 'visible' : 'collapse';\r\n            sidebarExpandButtonIcon.className = `${constants.classPrefix}sidebar-expand-icon fas fa-${isExpanded ? 'minus' : 'plus'}`;\r\n        };\r\n\r\n        sidebarHeader.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            isExpanded = !isExpanded;\r\n            updateSidebarExpansion();\r\n        });\r\n\r\n        sidebarHeader.appendChild(sidebarTitle);\r\n        sidebarHeader.appendChild(sidebarExpandButtonIcon);\r\n\r\n        sidebar.appendChild(sidebarHeader);\r\n        sidebar.appendChild(sectionTable);\r\n        document.body.appendChild(sidebar);\r\n\r\n        const scrollBarWidth = sidebar.offsetWidth - sidebar.clientWidth;\r\n        if (scrollBarWidth > 0) {\r\n            sidebar.style.width = (sidebarWidthInPx - scrollBarWidth) + 'px';\r\n        }\r\n\r\n        const storedSidebarExpansion = StorageUtil.getItem(localStorageIdentifiers.sidebarExpanded) === 'true';\r\n\r\n        // doing this here so we have offset values intact\r\n        updateSidebarExpansion();\r\n\r\n        if (storedSidebarExpansion != isExpanded) {\r\n            isExpanded = storedSidebarExpansion;\r\n            updateSidebarExpansion();\r\n        }\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageStep) {\r\n            return;\r\n        }\r\n\r\n        this.addProgressIndicators();\r\n        this.addDuplicateNav();\r\n        this.addSidebar();\r\n\r\n        new StepKeyboardShortcutsModule().start();\r\n    }\r\n}","export default {\r\n    classPrefix: 'cl-helper-'\r\n}","enum SectionStatus {\r\n    done = 'D',\r\n    viewed = 'V',\r\n    notViewed = 'N'\r\n}\r\nexport default SectionStatus;","export default abstract class DomUtil {\r\n    static cloneCanvas(original: HTMLCanvasElement, destination: HTMLCanvasElement): void {\r\n        const context = destination.getContext('2d');\r\n\r\n        if (!context) {\r\n            return;\r\n        }\r\n\r\n        destination.width = original.width;\r\n        destination.height = original.height;\r\n\r\n        context.drawImage(original, 0, 0);\r\n    }\r\n}","import StepNavController from '../../../../api/step/StepNavController';\r\nimport PageUtil from '../../../../util/PageUtil';\r\nimport Module from '../../../Module';\r\n\r\nexport default class StepKeyboardShortcutsModule extends Module {\r\n    private readonly stepNavController: StepNavController = new StepNavController();\r\n    private readonly shortcuts: Map<String[], Function> = new Map();\r\n\r\n    private addKeyboardHooks() {\r\n        window.addEventListener('keydown', (event) => {\r\n            if (!PageUtil.canUseKeyboardShortcuts) {\r\n                return;\r\n            }\r\n\r\n            // We only want to trigger the event if shift is pressed with the key\r\n            if (!event.shiftKey || event.key === 'Shift') {\r\n                return;\r\n            }\r\n\r\n            for (const [keys, shortcut] of this.shortcuts) {\r\n                if (keys.includes(event.key)) {\r\n                    shortcut();\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    start(): void {\r\n        this.shortcuts.set(['N'], this.stepNavController.goToNext);\r\n        this.shortcuts.set(['B'], this.stepNavController.goToPrevious);\r\n        this.shortcuts.set(['L'], this.stepNavController.goToList);\r\n        this.shortcuts.set(['M'], this.stepNavController.goToNextAndMark);\r\n\r\n        this.addKeyboardHooks();\r\n    }\r\n}","import Optional from '../../../interfaces/Optional';\r\nimport domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\n\r\nexport default class StepNavController {\r\n    private readonly listLink: Optional<HTMLAnchorElement>;\r\n    private readonly previousLink: Optional<HTMLAnchorElement>;\r\n    private readonly nextLink: Optional<HTMLAnchorElement>;\r\n    private readonly nextAndMarkLink: Optional<HTMLAnchorElement>;\r\n\r\n    private static imgToLink(img: Optional<Element>): Optional<HTMLAnchorElement> {\r\n        if (!img) {\r\n            return null;\r\n        }\r\n\r\n        return img.parentElement as HTMLAnchorElement;\r\n    }\r\n\r\n    constructor(stepNavDiv?: Element) {\r\n        ClassUtil.autoBind(this);\r\n\r\n        if (!stepNavDiv) {\r\n            stepNavDiv = document.getElementsByClassName(domIdentifiers.navDivClass)[0];\r\n        }\r\n\r\n        this.listLink = StepNavController.imgToLink(stepNavDiv.querySelector(domIdentifiers.navListSelector));\r\n\r\n        const [\r\n            previousImg,\r\n            nextImg,\r\n            nextAndMarkImg\r\n        ] = Array.from(stepNavDiv.querySelectorAll(domIdentifiers.navArrowsSelector));\r\n\r\n        this.previousLink = StepNavController.imgToLink(previousImg);\r\n        this.nextLink = StepNavController.imgToLink(nextImg);\r\n        this.nextAndMarkLink = StepNavController.imgToLink(nextAndMarkImg);\r\n    }\r\n\r\n    goToList() {\r\n        this.listLink && this.listLink.click();\r\n    }\r\n\r\n    goToPrevious() {\r\n        this.previousLink && this.previousLink.click();\r\n    }\r\n\r\n    goToNext() {\r\n        this.nextLink && this.nextLink.click();\r\n    }\r\n\r\n    goToNextAndMark() {\r\n        this.nextAndMarkLink && this.nextAndMarkLink.click();\r\n    }\r\n}","import domIdentifiers from '../../../config/domIdentifiers';\r\nimport localStorageIdentifiers from '../../../config/localStorageIdentifiers';\r\nimport TapEventListener from '../../../event/TapEventListener';\r\nimport ClassUtil from '../../../util/ClassUtil';\r\nimport PageUtil from '../../../util/PageUtil';\r\nimport StorageUtil from '../../../util/StorageUtil';\r\nimport Module from '../../Module';\r\n\r\nexport default class VideoModule extends Module {\r\n    private static _secondsToScrub: number = 5;\r\n    private static _playbackRateIncrementInSeconds: number = 0.125;\r\n    private _playbackRate: number = VideoModule.getPlaybackSpeedFromStorage();\r\n    private _video?: HTMLVideoElement;\r\n    private _videoContainer?: HTMLElement;\r\n    private _playbackDisplay?: HTMLElement;\r\n    private _windowKeyHandlers?: (e: KeyboardEvent) => void;\r\n\r\n    private static getPlaybackSpeedFromStorage(): number {\r\n        const storedPlaybackSpeedString = StorageUtil.getItem(localStorageIdentifiers.videoPlaybackSpeed);\r\n\r\n        if (!storedPlaybackSpeedString) {\r\n            return 1.0;\r\n        }\r\n\r\n        const storedPlaybackSpeedValue = Number.parseFloat(storedPlaybackSpeedString);\r\n\r\n        if (Number.isNaN(storedPlaybackSpeedValue)) {\r\n            return 1.0;\r\n        }\r\n\r\n        return storedPlaybackSpeedValue;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n    }\r\n\r\n    private onMutation(mutations: MutationRecord[]): void {\r\n       for (const mutation of mutations) {\r\n           if (!(mutation.target instanceof Element)) {\r\n               continue;\r\n           }\r\n\r\n           if (mutation.target.classList.contains(domIdentifiers.videoElementClass)) {\r\n               this.addVideoHooks(mutation.target as HTMLVideoElement);\r\n               return;\r\n           }\r\n       }\r\n    }\r\n\r\n    private async toggleVideoState() {\r\n        if (!this._video) {\r\n            return;\r\n        }\r\n\r\n        if (this._video.paused) {\r\n           return this._video.play();\r\n        }\r\n\r\n        return this._video.pause();\r\n    }\r\n\r\n    private onTap() {\r\n       this.toggleVideoState()\r\n           .catch(e => console.error('Unable to toggle video state:', e));\r\n    }\r\n\r\n    private updatePlaybackRate(newPlaybackRate: number) {\r\n        if (!this._video) {\r\n            return;\r\n        }\r\n\r\n        // 16 is the maximum value for a video element's playback rate\r\n        newPlaybackRate = Math.max(0, Math.min(newPlaybackRate, 16));\r\n\r\n        this._playbackRate = newPlaybackRate;\r\n        this._video.playbackRate = newPlaybackRate;\r\n        StorageUtil.setItem(localStorageIdentifiers.videoPlaybackSpeed, newPlaybackRate);\r\n\r\n        if (this._playbackDisplay) {\r\n            this._playbackDisplay.innerText = `Playback Speed: ${newPlaybackRate}`;\r\n        }\r\n    }\r\n\r\n    private addKeyHandlers(video: HTMLVideoElement) {\r\n        if (this._windowKeyHandlers) {\r\n            window.removeEventListener('keydown', this._windowKeyHandlers);\r\n        }\r\n\r\n        this._windowKeyHandlers = (e: KeyboardEvent) => {\r\n            if (!PageUtil.canUseKeyboardShortcuts) {\r\n                return;\r\n            }\r\n\r\n            if (['ArrowLeft'].includes(e.key)) {\r\n                video.currentTime = Math.max(video.currentTime - VideoModule._secondsToScrub, 0);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['ArrowRight'].includes(e.key)) {\r\n                video.currentTime = Math.min(video.duration, video.currentTime + VideoModule._secondsToScrub);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['_', '-'].includes(e.key)) {\r\n                this.updatePlaybackRate(this._playbackRate - VideoModule._playbackRateIncrementInSeconds);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['+', '='].includes(e.key)) {\r\n                this.updatePlaybackRate(this._playbackRate + VideoModule._playbackRateIncrementInSeconds);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['0'].includes(e.key)) {\r\n                this.updatePlaybackRate(1.0);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if ([' ', 'Space', 'Enter'].includes(e.key)) {\r\n                this.onTap();\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', this._windowKeyHandlers);\r\n    }\r\n\r\n    private addTapHandler(videoContainer: HTMLElement) {\r\n        const tapListener = new TapEventListener(videoContainer, this.onTap);\r\n        tapListener.listen();\r\n    }\r\n\r\n    private addVideoPlayHandler(video: HTMLVideoElement) {\r\n        video.addEventListener('play', () => {\r\n            video.playbackRate = this._playbackRate;\r\n        });\r\n    }\r\n\r\n    private setupPlaybackDisplay() {\r\n        if (this._playbackDisplay) {\r\n            return;\r\n        }\r\n\r\n        const videoContentDiv = document.getElementsByClassName(domIdentifiers.videoCourseLibClass)[0];\r\n\r\n        if (videoContentDiv) {\r\n            this._playbackDisplay = document.createElement('div');\r\n            this.updatePlaybackRate(this._playbackRate);\r\n            videoContentDiv.insertAdjacentElement('afterend', this._playbackDisplay);\r\n        }\r\n    }\r\n\r\n    private centerPlayButton(videoContainer: HTMLElement) {\r\n        const { offsetHeight: containerHeight, offsetWidth: containerWidth } = videoContainer;\r\n\r\n        const playButton = document.getElementsByClassName(domIdentifiers.videoPlayButtonClass)[0];\r\n\r\n        if (!playButton) {\r\n            return;\r\n        }\r\n\r\n        if (!(playButton instanceof HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        const { offsetHeight: buttonHeight, offsetWidth: buttonWidth } = playButton;\r\n\r\n        if (!containerHeight || !containerWidth || !buttonHeight || !buttonWidth) {\r\n            return;\r\n        }\r\n\r\n        const newTop = (containerHeight - buttonHeight) / 2;\r\n        const newLeft = (containerWidth - buttonWidth) / 2;\r\n\r\n        playButton.style.top = `${newTop}px`;\r\n        playButton.style.left = `${newLeft}px`;\r\n    }\r\n\r\n\r\n    private addVideoHooks(video: HTMLVideoElement) {\r\n        // Don't add hooks to the same video instance twice\r\n        if (this._video === video) {\r\n            return;\r\n        }\r\n\r\n        const videoContainer = document.getElementsByClassName(domIdentifiers.videoContainerClass)[0];\r\n\r\n        if (!videoContainer || !(videoContainer instanceof HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        this._videoContainer = videoContainer;\r\n        this._video = video;\r\n\r\n        this.setupPlaybackDisplay();\r\n        this.addVideoPlayHandler(video);\r\n        this.addTapHandler(videoContainer);\r\n        this.addKeyHandlers(video);\r\n        this.centerPlayButton(videoContainer);\r\n        this.updatePlaybackRate(this._playbackRate);\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageVideo) {\r\n            return;\r\n        }\r\n\r\n        const video = document.querySelector(domIdentifiers.videoElementSelector);\r\n\r\n        if (video) {\r\n            this.addVideoHooks(video as HTMLVideoElement);\r\n        }\r\n\r\n        const videoContainer = document.getElementsByClassName(domIdentifiers.videoCourseLibClass)[0];\r\n\r\n        const observer = new MutationObserver(this.onMutation);\r\n\r\n        observer.observe(videoContainer, { childList: true, subtree: true });\r\n    }\r\n}","import ClassUtil from '../util/ClassUtil';\r\n\r\ninterface ITouchMovement {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport default class TapEventListener {\r\n    private static _tapMaxTimeMs: number = 200;\r\n    private static _dragMaxSqrtDistance: number = 20;\r\n    private _initialTouchTime: number;\r\n    private _initialTouch?: Touch;\r\n    private _lastTouch?: Touch;\r\n    private _isActive: boolean;\r\n\r\n    constructor(readonly element: Element, readonly onTap: () => void) {\r\n        ClassUtil.autoBind(this);\r\n\r\n        this._isActive = false;\r\n        this._initialTouchTime = 0;\r\n    }\r\n\r\n    private static getMovementDelta(newer: Touch, older: Touch): ITouchMovement {\r\n        return {\r\n            x: newer.pageX - older.pageX,\r\n            y: newer.pageY - older.pageY\r\n        };\r\n    }\r\n\r\n    private onTouchStart(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        if (event.touches.length !== 1) {\r\n            return;\r\n        }\r\n\r\n        this._initialTouch = event.touches[0];\r\n        this._initialTouchTime = Date.now();\r\n        this._isActive = true;\r\n    }\r\n\r\n    private onTouchMove(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        this._lastTouch = event.touches[0];\r\n\r\n        if (!this._initialTouch) {\r\n            return;\r\n        }\r\n\r\n        const movement = TapEventListener.getMovementDelta(this._lastTouch, this._initialTouch);\r\n\r\n        if (Math.sqrt(movement.x ** 2 + movement.y ** 2) >= TapEventListener._dragMaxSqrtDistance) {\r\n            this._isActive = false;\r\n        }\r\n    }\r\n\r\n    private onTouchEnd(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        if (!this._isActive) {\r\n            return;\r\n        }\r\n\r\n        if (Date.now() - this._initialTouchTime >= TapEventListener._tapMaxTimeMs) {\r\n            return;\r\n        }\r\n\r\n        this.onTap();\r\n    }\r\n\r\n    private addHooks() {\r\n        this.element.addEventListener('touchstart', this.onTouchStart);\r\n        this.element.addEventListener('touchmove', this.onTouchMove);\r\n        this.element.addEventListener('touchend', this.onTouchEnd);\r\n    }\r\n\r\n    public listen() {\r\n        this.addHooks();\r\n    }\r\n}"],"sourceRoot":""}