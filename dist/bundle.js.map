{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/config/domIdentifiers.ts","webpack:///./src/lib/module/Module.ts","webpack:///./src/lib/util/ClassUtil.ts","webpack:///./src/lib/util/PageUtil.ts","webpack:///./src/extension.ts","webpack:///./src/lib/module/modules/MsuHrefModule.ts","webpack:///./src/lib/module/modules/QuizModule.ts","webpack:///./src/lib/api/quiz/QuizListener.ts","webpack:///./src/lib/module/modules/StepModule.ts","webpack:///./src/lib/util/DomUtil.ts","webpack:///./src/lib/module/modules/VideoModule.ts","webpack:///./src/lib/event/TapEventListener.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","videoClass","quizClass","videoId","videoContainerId","stepDataId","siteDataId","msuLinkHeaderClass","videoPlayButtonClass","stepProgressClass","navDivClass","Module","loadModules","_i","arguments","length","modules_1","__values","modules_1_1","next","done","start","ComponentUtil","autoBind","context","props","contextPrototype","getPrototypeOf","getOwnPropertyNames","props_1","props_1_1","prop","descriptor","getOwnPropertyDescriptor","protectedJavaScriptProperties","includes","bindMethod","proto","method","functionToBind","configurable","this","boundFunction","writable","domIdentifiers_1","PageUtil","isClassElementPresent","className","elements","document","getElementsByClassName","getNavigationBar","querySelector","getSiteData","siteDataElement","getElementById","JSON","parse","innerText","Module_1","MsuHrefModule_1","QuizModule_1","StepModule_1","VideoModule_1","PageUtil_1","MsuHrefModule","_super","__extends","data","linkElement","setAttribute","root","QuizListener_1","ClassUtil_1","QuizModule","_this","quizContainer","getNextQuestionButton","startQuizWithResult","startQuizTag","click","tryToGoToNextQuestion","nextQuestionButton","toLowerCase","addNextButtonHooks","onkeydown","e","quizContinueKeys","onNewQuizQuestion","inputs","getElementsByTagName","hasFocused","inputs_1","inputs_1_1","input","hidden","type","style","display","focus","isPageQuiz","onQuestion","listen","QuizListener","params","currentQuestion","getQuestionDataFromMatch","match","current","parseInt","total","onContainerMutate","mutations","observer","h2","questionRegex","test","disconnect","onStart","listenForQuizQuestionChange","onQuizHeaderMutation","MutationObserver","observe","subtree","characterData","childList","listenForQuizStart","attributes","DomUtil_1","StepModule","sectionNameToIndex","getStepData","metadata","processData","element","dataText","step","isStepEnabled","sections","section","tag","index","getProgressString","totalSections","onSectionHoverMutate","mutations_1","mutations_1_1","mutation","target","HTMLElement","sectionHoverDiv","pageName","trim","endsWith","replace","addNavBarProgressIndicator","navigationBar","progressElement","createElement","appendChild","addHoverProgressIndicator","hoverDiv","addProgressIndicators","addDuplicateNav","nav","content","clonedNav","cloneNode","originalCanvas","clonedCanvas","cloneCanvas","title","insertAdjacentElement","DomUtil","original","destination","getContext","width","height","drawImage","TapEventListener_1","VideoModule","onMutation","Element","id","addVideoHooks","toggleVideoState","_video","paused","play","pause","onTap","catch","console","error","updatePlaybackRate","newPlaybackRate","_playbackDisplay","playbackRate","addKeyHandlers","videoContainer","video","addEventListener","currentTime","Math","max","_secondsToScrub","preventDefault","min","duration","_playbackRateChange","addTapHandler","setupPlaybackDisplay","videoContentDiv","centerPlayButton","containerHeight","offsetHeight","containerWidth","offsetWidth","playButton","buttonHeight","buttonWidth","newTop","newLeft","top","left","_videoContainer","isPageVideo","TapEventListener","_isActive","_initialTouchTime","getMovementDelta","newer","older","x","pageX","y","pageY","onTouchStart","event","TouchEvent","touches","_initialTouch","Date","now","onTouchMove","_lastTouch","movement","sqrt","pow","_dragMaxSqrtDistance","onTouchEnd","_tapMaxTimeMs","addHooks"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","export default {\r\n    videoClass: 'cl-video',\r\n    quizClass: 'cl-quiz',\r\n    videoId: 'vjs_video_3_html5_api',\r\n    videoContainerId: 'vjs_video_3',\r\n    stepDataId: 'cl-step',\r\n    siteDataId: 'cl-site',\r\n    msuLinkHeaderClass: 'masthead',\r\n    videoPlayButtonClass: 'vjs-big-play-button',\r\n    stepProgressClass: 'cl-step-progress',\r\n    navDivClass: 'cl-stepnav-div'\r\n}\r\n","export default abstract class Module {\r\n    abstract start(): void;\r\n\r\n    static loadModules(...modules: Module[]): void {\r\n        for (const module of modules) {\r\n            module.start();\r\n        }\r\n    }\r\n}","export default class ComponentUtil {\r\n    /**\r\n     * There is a react-autobind module that some of our other projects use.\r\n     * I had previously installed this module and was looking at the source on github to make\r\n     * typescript definitions for it, and it's pretty bad. So this is a mini refactor of it, since\r\n     * it's really short anyways.\r\n     *\r\n     * Referenced from\r\n     * https://github.com/cassiozen/React-autobind/blob/master/src/autoBind.js\r\n     */\r\n    static autoBind(context: any, ...props: string[]): void {\r\n        const contextPrototype = Object.getPrototypeOf(context);\r\n\r\n        if (props.length === 0) {\r\n            props = Object.getOwnPropertyNames(contextPrototype);\r\n        }\r\n\r\n        for (const prop of props) {\r\n            const descriptor = Object.getOwnPropertyDescriptor(contextPrototype, prop);\r\n\r\n            // Missing this prop, not a big deal (or the prop isn't a function, so we don't bind it)\r\n            if (descriptor == null || typeof descriptor.value !== 'function') {\r\n                continue;\r\n            }\r\n\r\n            if (ComponentUtil.protectedJavaScriptProperties.includes(prop)) {\r\n                continue;\r\n            }\r\n\r\n            ComponentUtil.bindMethod(contextPrototype, prop, descriptor);\r\n        }\r\n    }\r\n\r\n    // All of the props on the prototype of an empty object should be excluded from binding\r\n    private static protectedJavaScriptProperties: string[] = Object.getOwnPropertyNames(Object.getPrototypeOf({}));\r\n\r\n    /**\r\n     * From autobind-decorator (https://github.com/andreypopp/autobind-decorator/tree/master)\r\n     * Return a descriptor removing the value and returning a getter\r\n     * The getter will return a .bind version of the function\r\n     * and memoize the result against a symbol on the instance\r\n     */\r\n    private static bindMethod(proto: any, method: string, descriptor: PropertyDescriptor) {\r\n        const functionToBind = descriptor.value;\r\n\r\n        Object.defineProperty(proto, method, {\r\n            configurable: true,\r\n            get() {\r\n                if (this === proto || this.hasOwnProperty(method)) {\r\n                    return functionToBind;\r\n                }\r\n\r\n                const boundFunction = functionToBind.bind(this);\r\n\r\n                Object.defineProperty(this, method, {\r\n                    value: boundFunction,\r\n                    configurable: true,\r\n                    writable: true\r\n                });\r\n\r\n                return boundFunction;\r\n            }\r\n        });\r\n    }\r\n}","import ISiteData from '../../interfaces/site/ISiteData';\r\nimport domIdentifiers from '../config/domIdentifiers';\r\nexport default abstract class PageUtil {\r\n    static isClassElementPresent(className: string): boolean {\r\n        const elements = document.getElementsByClassName(className);\r\n\r\n        return !!(elements && elements.length && elements[0]);\r\n    }\r\n\r\n    static get isPageQuiz(): boolean {\r\n        return PageUtil.isClassElementPresent(domIdentifiers.quizClass);\r\n    }\r\n\r\n    static get isPageVideo(): boolean {\r\n        return PageUtil.isClassElementPresent(domIdentifiers.videoClass);\r\n    }\r\n\r\n    static getNavigationBar(): HTMLUListElement | null {\r\n        return document.querySelector('nav ul');\r\n    }\r\n\r\n    static getSiteData(): ISiteData | null {\r\n        const siteDataElement = document.getElementById(domIdentifiers.siteDataId);\r\n\r\n        if (!siteDataElement) {\r\n            return null;\r\n        }\r\n\r\n        return JSON.parse(siteDataElement.innerText);\r\n    }\r\n}\r\n","import Module from './lib/module/Module';\r\nimport MsuHrefModule from './lib/module/modules/MsuHrefModule';\r\nimport QuizModule from './lib/module/modules/QuizModule';\r\nimport StepModule from './lib/module/modules/StepModule';\r\nimport VideoModule from './lib/module/modules/VideoModule';\r\n\r\nModule.loadModules(\r\n    new StepModule(),\r\n    new QuizModule(),\r\n    new VideoModule(),\r\n    new MsuHrefModule()\r\n);","import domIdentifiers from '../../config/domIdentifiers';\r\nimport PageUtil from '../../util/PageUtil';\r\nimport Module from '../Module';\r\n\r\nexport default class MsuHrefModule extends Module {\r\n    start(): void {\r\n        const data = PageUtil.getSiteData();\r\n\r\n        if (!data) {\r\n            return;\r\n        }\r\n\r\n        const linkElement = document.querySelector(`.${domIdentifiers.msuLinkHeaderClass} a`);\r\n\r\n        if (!linkElement) {\r\n            return;\r\n        }\r\n\r\n        linkElement.setAttribute('href', data.root);\r\n    }\r\n}","import QuizListener, { IQuestionData } from '../../api/quiz/QuizListener';\r\nimport domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\nimport PageUtil from '../../util/PageUtil';\r\nimport Module from '../Module';\r\n\r\nexport default class QuizModule extends Module {\r\n    private static quizContinueKeys: string[] = ['Enter', 'ArrowRight'];\r\n    private quizContainer: HTMLDivElement;\r\n\r\n    static getNextQuestionButton(): HTMLButtonElement | null {\r\n        return document.querySelector(`.${domIdentifiers.quizClass} button`);\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n\r\n        this.quizContainer = document.getElementsByClassName(domIdentifiers.quizClass)[0] as HTMLDivElement;\r\n    }\r\n\r\n    private startQuizWithResult(): boolean {\r\n        if (!this.quizContainer) {\r\n            return false;\r\n        }\r\n\r\n        const startQuizTag = this.quizContainer.querySelector('a');\r\n\r\n        if (!startQuizTag) {\r\n            return false;\r\n        }\r\n\r\n        if (!startQuizTag.innerText.includes('click to proceed to the quiz.')) {\r\n            return false;\r\n        }\r\n\r\n        startQuizTag.click();\r\n        return true;\r\n    }\r\n\r\n    private tryToGoToNextQuestion() {\r\n        const nextQuestionButton = QuizModule.getNextQuestionButton();\r\n\r\n        if (!nextQuestionButton || !nextQuestionButton.innerText.toLowerCase().includes('next')) {\r\n            return;\r\n        }\r\n\r\n        nextQuestionButton.click();\r\n    }\r\n\r\n    private addNextButtonHooks() {\r\n        document.onkeydown = (e: KeyboardEvent) => {\r\n            if (!QuizModule.quizContinueKeys.includes(e.key)) {\r\n                return;\r\n            }\r\n\r\n            const couldStartQuiz = this.startQuizWithResult();\r\n\r\n            if (couldStartQuiz) {\r\n                return;\r\n            }\r\n\r\n            this.tryToGoToNextQuestion();\r\n        };\r\n    }\r\n\r\n    private onNewQuizQuestion() {\r\n        const inputs = this.quizContainer.getElementsByTagName('input');\r\n        let hasFocused: boolean = false;\r\n\r\n        for (const input of inputs) {\r\n            input.setAttribute('autocomplete', 'off');\r\n\r\n            if (!hasFocused && !input.hidden && input.type !== 'hidden' && input.style.display !== 'none') {\r\n                input.focus();\r\n                hasFocused = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageQuiz) {\r\n            return;\r\n        }\r\n\r\n        this.addNextButtonHooks();\r\n\r\n        new QuizListener({ onQuestion: this.onNewQuizQuestion }).listen();\r\n    }\r\n}\r\n","import domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\n\r\ninterface IQuizListenerParams {\r\n    onStart?(data: IQuestionData): void;\r\n    onQuestion?(data: IQuestionData): void;\r\n}\r\n\r\nexport interface IQuestionData {\r\n    current: number;\r\n    total: number;\r\n}\r\n\r\nexport default class QuizListener {\r\n    private static questionRegex = /^question (\\d+) of (\\d+)$/i;\r\n    private readonly quizContainer: HTMLElement;\r\n    private currentQuestion: number;\r\n\r\n    constructor(readonly params: IQuizListenerParams) {\r\n        this.quizContainer = document.getElementsByClassName(domIdentifiers.quizClass)[0] as HTMLElement;\r\n        this.currentQuestion = 0;\r\n\r\n        ClassUtil.autoBind(this);\r\n    }\r\n\r\n    private getQuestionDataFromMatch(match: RegExpMatchArray): IQuestionData {\r\n        const current = parseInt(match[1]);\r\n        const total = parseInt(match[2]);\r\n\r\n        return { current, total };\r\n    }\r\n\r\n    private onContainerMutate(mutations: MutationRecord[], observer: MutationObserver) {\r\n        const h2 = this.quizContainer.querySelector('h2');\r\n\r\n        if (!h2) {\r\n            return;\r\n        }\r\n\r\n        if (!QuizListener.questionRegex.test(h2.innerText)) {\r\n            return;\r\n        }\r\n\r\n        observer.disconnect();\r\n\r\n        const match = h2.innerText.match(QuizListener.questionRegex);\r\n\r\n        if (!match) {\r\n            return;\r\n        }\r\n\r\n\r\n        const data = this.getQuestionDataFromMatch(match);\r\n\r\n        this.currentQuestion = data.current;\r\n\r\n        if (this.params.onStart) {\r\n            this.params.onStart(data);\r\n        }\r\n\r\n        if (this.params.onQuestion) {\r\n            this.params.onQuestion(data);\r\n        }\r\n\r\n        this.listenForQuizQuestionChange();\r\n    }\r\n\r\n    private onQuizHeaderMutation() {\r\n        const h2 = this.quizContainer.querySelector('h2');\r\n\r\n        if (!h2) {\r\n            return;\r\n        }\r\n\r\n        if (!QuizListener.questionRegex.test(h2.innerText)) {\r\n            return;\r\n        }\r\n\r\n        const match = h2.innerText.match(QuizListener.questionRegex);\r\n\r\n        if (!match) {\r\n            return;\r\n        }\r\n\r\n        const data = this.getQuestionDataFromMatch(match);\r\n\r\n        if (data.current === this.currentQuestion) {\r\n            return;\r\n        }\r\n\r\n        this.currentQuestion = data.current;\r\n\r\n        if (this.params.onQuestion) {\r\n            this.params.onQuestion(data);\r\n        }\r\n    }\r\n\r\n    private listenForQuizQuestionChange() {\r\n        new MutationObserver(this.onQuizHeaderMutation)\r\n            .observe(this.quizContainer, { subtree: true, characterData: true, childList: true });\r\n    }\r\n\r\n    private listenForQuizStart() {\r\n        new MutationObserver(this.onContainerMutate)\r\n            .observe(this.quizContainer, { subtree: true, childList: true, characterData: true, attributes: true });\r\n    }\r\n\r\n    listen() {\r\n        this.listenForQuizStart();\r\n    }\r\n}","import IStepData from '../../../interfaces/step/IStepData';\r\nimport IStepMetadata from '../../../interfaces/step/IStepMetadata';\r\nimport domIdentifiers from '../../config/domIdentifiers';\r\nimport ClassUtil from '../../util/ClassUtil';\r\nimport DomUtil from '../../util/DomUtil';\r\nimport PageUtil from '../../util/PageUtil';\r\nimport Module from '../Module';\r\n\r\nexport default class StepModule extends Module {\r\n    readonly data: IStepData | null;\r\n    readonly metadata: IStepMetadata | null;\r\n    private sectionHoverDiv?: HTMLElement;\r\n    private sectionNameToIndex: { [key: string]: number } = {};\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n\r\n        this.data = StepModule.getStepData();\r\n        this.metadata = this.processData(this.data);\r\n    }\r\n\r\n    static getStepData(): IStepData | null {\r\n        const element = document.getElementById(domIdentifiers.stepDataId);\r\n\r\n        if (!element) {\r\n            return null;\r\n        }\r\n\r\n        const dataText = element.innerText;\r\n\r\n        return JSON.parse(dataText);\r\n    }\r\n\r\n    private processData(data: IStepData | null): IStepMetadata | null {\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        if (!data.step) {\r\n            return { isStepEnabled: false };\r\n        }\r\n\r\n        let current;\r\n\r\n        for (let i = 0; i < data.sections.length; ++i) {\r\n            const section = data.sections[i];\r\n\r\n            this.sectionNameToIndex[section.name] = i;\r\n\r\n            if (!current && section.tag === data.current) {\r\n                current = {\r\n                    section,\r\n                    index: i\r\n                };\r\n            }\r\n        }\r\n\r\n        if (!current) {\r\n            return { isStepEnabled: true };\r\n        }\r\n\r\n        return {\r\n            isStepEnabled: true,\r\n            current\r\n        };\r\n    }\r\n\r\n    private getProgressString(current: number) {\r\n        return `(${ current }/${ this.totalSections })`;\r\n    }\r\n\r\n    private get totalSections(): number {\r\n        return (this.data && this.data.sections && this.data.sections.length) || 0;\r\n    }\r\n\r\n    private onSectionHoverMutate(mutations: MutationRecord[]) {\r\n        for (const mutation of mutations) {\r\n            let target: HTMLElement;\r\n\r\n            if (mutation.target instanceof HTMLElement) {\r\n                target = mutation.target;\r\n            } else {\r\n                if (mutation.type === 'characterData' && this.sectionHoverDiv) {\r\n                    target = this.sectionHoverDiv;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let pageName = target.innerText.trim();\r\n\r\n            if (!this.sectionNameToIndex.hasOwnProperty(pageName)) {\r\n                if (pageName.endsWith('(cont)')) {\r\n                    pageName = pageName.replace(/\\s+\\(cont\\)\\s*/, '').trim();\r\n                }\r\n\r\n                // Check again in case the cont removal fixed it\r\n                if (!this.sectionNameToIndex.hasOwnProperty(pageName)) {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            target.innerText += ` ${ this.getProgressString(this.sectionNameToIndex[pageName] + 1) }`;\r\n            break;\r\n        }\r\n    }\r\n\r\n    private addNavBarProgressIndicator() {\r\n        const navigationBar = PageUtil.getNavigationBar();\r\n\r\n        if (!navigationBar || !this.metadata || !this.metadata.current) {\r\n            return;\r\n        }\r\n\r\n        const progressElement = document.createElement('li');\r\n        progressElement.innerText = `Progress: ${ this.getProgressString(this.metadata.current.index + 1) }`;\r\n\r\n        navigationBar.appendChild(progressElement);\r\n    }\r\n\r\n    private addHoverProgressIndicator() {\r\n        const hoverDiv = document.querySelector(`.${ domIdentifiers.stepProgressClass } div`);\r\n\r\n        if (!hoverDiv) {\r\n            return;\r\n        }\r\n\r\n        this.sectionHoverDiv = hoverDiv as HTMLElement;\r\n\r\n        new MutationObserver(this.onSectionHoverMutate)\r\n            .observe(hoverDiv, { characterData: true, attributes: true, subtree: true });\r\n    }\r\n\r\n    private addProgressIndicators() {\r\n        this.addNavBarProgressIndicator();\r\n        this.addHoverProgressIndicator();\r\n    }\r\n\r\n    private addDuplicateNav() {\r\n        const nav = document.getElementsByClassName(domIdentifiers.navDivClass)[0];\r\n\r\n        if (!nav) {\r\n            return;\r\n        }\r\n\r\n        const content = document.getElementsByClassName('content')[0];\r\n\r\n        if (!content) {\r\n            return;\r\n        }\r\n\r\n        const clonedNav = nav.cloneNode(true) as HTMLDivElement;\r\n\r\n        const originalCanvas = nav.querySelector('canvas');\r\n        const clonedCanvas = clonedNav.querySelector('canvas');\r\n\r\n        if (originalCanvas && clonedCanvas) {\r\n            DomUtil.cloneCanvas(originalCanvas, clonedCanvas);\r\n            clonedCanvas.title = 'Hovering on the duplicate nav is not currently supported';\r\n        }\r\n\r\n        content.insertAdjacentElement('afterend', clonedNav);\r\n    }\r\n\r\n    start(): void {\r\n        this.addProgressIndicators();\r\n        this.addDuplicateNav();\r\n    }\r\n}","export default abstract class DomUtil {\r\n    static cloneCanvas(original: HTMLCanvasElement, destination: HTMLCanvasElement): void {\r\n        const context = destination.getContext('2d');\r\n\r\n        if (!context) {\r\n            return;\r\n        }\r\n\r\n        destination.width = original.width;\r\n        destination.height = original.height;\r\n\r\n        context.drawImage(original, 0, 0);\r\n    }\r\n}","import domIdentifiers from '../../config/domIdentifiers';\r\nimport TapEventListener from '../../event/TapEventListener';\r\nimport ClassUtil from '../../util/ClassUtil';\r\nimport PageUtil from '../../util/PageUtil';\r\nimport Module from '../Module';\r\n\r\nexport default class VideoModule extends Module {\r\n    private static _secondsToScrub: number = 5;\r\n    private static _playbackRateChange: number = 0.125;\r\n    private _video?: HTMLVideoElement;\r\n    private _videoContainer?: HTMLElement;\r\n    private _playbackDisplay?: HTMLElement;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        ClassUtil.autoBind(this);\r\n    }\r\n\r\n    private onMutation(mutations: MutationRecord[], observer: MutationObserver): void {\r\n       for (const mutation of mutations) {\r\n           if (!(mutation.target instanceof Element)) {\r\n               continue;\r\n           }\r\n\r\n           if (mutation.target.id === domIdentifiers.videoId) {\r\n               this.addVideoHooks(mutation.target as HTMLVideoElement);\r\n               observer.disconnect();\r\n               return;\r\n           }\r\n       }\r\n    }\r\n\r\n    private async toggleVideoState() {\r\n        if (!this._video) {\r\n            return;\r\n        }\r\n\r\n        if (this._video.paused) {\r\n           return this._video.play();\r\n        }\r\n\r\n        return this._video.pause();\r\n    }\r\n\r\n    private onTap() {\r\n       this.toggleVideoState()\r\n           .catch(e => console.error('Unable to toggle video state:', e));\r\n    }\r\n\r\n    private updatePlaybackRate(newPlaybackRate: number) {\r\n        if (!this._video || !this._playbackDisplay) {\r\n            return;\r\n        }\r\n\r\n        this._video.playbackRate = newPlaybackRate;\r\n        this._playbackDisplay.innerText = `Playback Speed: ${newPlaybackRate}`;\r\n    }\r\n\r\n    private addKeyHandlers(videoContainer: HTMLElement, video: HTMLVideoElement) {\r\n        videoContainer.addEventListener('keydown',  (e: KeyboardEvent) => {\r\n            if (['ArrowLeft'].includes(e.key)) {\r\n                video.currentTime = Math.max(video.currentTime - VideoModule._secondsToScrub, 0);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['ArrowRight'].includes(e.key)) {\r\n                video.currentTime = Math.min(video.duration, video.currentTime + VideoModule._secondsToScrub);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['_', '-'].includes(e.key)) {\r\n                this.updatePlaybackRate(Math.max(video.playbackRate - VideoModule._playbackRateChange, 0));\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['+', '='].includes(e.key)) {\r\n                this.updatePlaybackRate(video.playbackRate + VideoModule._playbackRateChange);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (['0'].includes(e.key)) {\r\n                this.updatePlaybackRate(1.0);\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if ([' ', 'Space'].includes(e.key)) {\r\n                this.onTap();\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n        });\r\n    }\r\n\r\n    private addTapHandler(videoContainer: HTMLElement) {\r\n        const tapListener = new TapEventListener(videoContainer, this.onTap);\r\n        tapListener.listen();\r\n    }\r\n\r\n    private setupPlaybackDisplay(video: HTMLVideoElement) {\r\n        const videoContentDiv = document.getElementsByClassName(domIdentifiers.videoClass)[0];\r\n\r\n        if (videoContentDiv) {\r\n            this._playbackDisplay = document.createElement('div');\r\n            this.updatePlaybackRate(video.playbackRate);\r\n            videoContentDiv.insertAdjacentElement('afterend', this._playbackDisplay);\r\n        }\r\n    }\r\n\r\n    private centerPlayButton(videoContainer: HTMLElement) {\r\n        const { offsetHeight: containerHeight, offsetWidth: containerWidth } = videoContainer;\r\n\r\n        const playButton = document.getElementsByClassName(domIdentifiers.videoPlayButtonClass)[0];\r\n\r\n        if (!playButton) {\r\n            return;\r\n        }\r\n\r\n        if (!(playButton instanceof HTMLElement)) {\r\n            return;\r\n        }\r\n\r\n        const { offsetHeight: buttonHeight, offsetWidth: buttonWidth } = playButton;\r\n\r\n        if (!containerHeight || !containerWidth || !buttonHeight || !buttonWidth) {\r\n            return;\r\n        }\r\n\r\n        const newTop = (containerHeight - buttonHeight) / 2;\r\n        const newLeft = (containerWidth - buttonWidth) / 2;\r\n\r\n        playButton.style.top = `${newTop}px`;\r\n        playButton.style.left = `${newLeft}px`;\r\n    }\r\n\r\n    private addVideoHooks(video: HTMLVideoElement) {\r\n        const videoContainer = document.getElementById(domIdentifiers.videoContainerId);\r\n\r\n        if (!videoContainer) {\r\n            return;\r\n        }\r\n\r\n        this._videoContainer = videoContainer;\r\n        this._video = video;\r\n\r\n        this.setupPlaybackDisplay(video);\r\n        this.addTapHandler(videoContainer);\r\n        this.addKeyHandlers(videoContainer, video);\r\n        this.centerPlayButton(videoContainer);\r\n    }\r\n\r\n    start(): void {\r\n        if (!PageUtil.isPageVideo) {\r\n            return;\r\n        }\r\n\r\n        const video = document.getElementById(domIdentifiers.videoId);\r\n\r\n        if (video) {\r\n            this.addVideoHooks(video as HTMLVideoElement);\r\n            return;\r\n        }\r\n\r\n        const videoContainer = document.getElementsByClassName(domIdentifiers.videoClass)[0];\r\n\r\n        const observer = new MutationObserver(this.onMutation);\r\n\r\n        observer.observe(videoContainer, { childList: true, subtree: true });\r\n    }\r\n}","import ClassUtil from '../util/ClassUtil';\r\n\r\ninterface ITouchMovement {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport default class TapEventListener {\r\n    private static _tapMaxTimeMs: number = 200;\r\n    private static _dragMaxSqrtDistance: number = 20;\r\n    private _initialTouchTime: number;\r\n    private _initialTouch?: Touch;\r\n    private _lastTouch?: Touch;\r\n    private _isActive: boolean;\r\n\r\n    constructor(readonly element: Element, readonly onTap: () => void) {\r\n        ClassUtil.autoBind(this);\r\n\r\n        this._isActive = false;\r\n        this._initialTouchTime = 0;\r\n    }\r\n\r\n    private static getMovementDelta(newer: Touch, older: Touch): ITouchMovement {\r\n        return {\r\n            x: newer.pageX - older.pageX,\r\n            y: newer.pageY - older.pageY\r\n        };\r\n    }\r\n\r\n    private onTouchStart(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        if (event.touches.length !== 1) {\r\n            return;\r\n        }\r\n\r\n        this._initialTouch = event.touches[0];\r\n        this._initialTouchTime = Date.now();\r\n        this._isActive = true;\r\n    }\r\n\r\n    private onTouchMove(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        this._lastTouch = event.touches[0];\r\n\r\n        if (!this._initialTouch) {\r\n            return;\r\n        }\r\n\r\n        const movement = TapEventListener.getMovementDelta(this._lastTouch, this._initialTouch);\r\n\r\n        if (Math.sqrt(movement.x ** 2 + movement.y ** 2) >= TapEventListener._dragMaxSqrtDistance) {\r\n            this._isActive = false;\r\n        }\r\n    }\r\n\r\n    private onTouchEnd(event: Event) {\r\n        if (!(event instanceof TouchEvent)) {\r\n            return;\r\n        }\r\n\r\n        if (!this._isActive) {\r\n            return;\r\n        }\r\n\r\n        if (Date.now() - this._initialTouchTime >= TapEventListener._tapMaxTimeMs) {\r\n            return;\r\n        }\r\n\r\n        this.onTap();\r\n    }\r\n\r\n    private addHooks() {\r\n        this.element.addEventListener('touchstart', this.onTouchStart);\r\n        this.element.addEventListener('touchmove', this.onTouchMove);\r\n        this.element.addEventListener('touchend', this.onTouchEnd);\r\n    }\r\n\r\n    public listen() {\r\n        this.addHooks();\r\n    }\r\n}"],"sourceRoot":""}